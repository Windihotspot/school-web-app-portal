import{_ as ye,r as s,u as xe,b as ge,o as be,e as D,f as p,g as we,w as g,M as Me,h as et,i as v,j as t,k as b,l as w,m as f,t as o,F as E,n as W,p as Te,q as Ye,E as q,s as Ae,v as Oe}from"./index-DQc30q18.js";const e=P=>(Ae("data-v-ea592d99"),P=P(),Oe(),P),ke={class:"p-2 bg-[#f0f8ff]"},Se=e(()=>t("h2",{class:"text-xl font-bold mt-2 ml-6"},"Statement Analysis Result",-1)),Ie={key:0,class:"flex items-center justify-center h-96"},Ne={key:1,class:"p-2 md:p-8"},De={class:"flex justify-between"},Re=e(()=>t("i",{class:"fas fa-arrow-left mr-2"},null,-1)),$e={class:"text-right"},je=e(()=>t("i",{class:"fas fa-download mr-2"},null,-1)),Ce={class:"grid grid-cols-1 md:grid-cols-3 gap-6 text-gray-700 mt-4 mb-6"},Be=e(()=>t("i",{class:"fas fa-calendar mr-2"},null,-1)),Le=e(()=>t("strong",null,"Statement Period:",-1)),Ee=e(()=>t("br",null,null,-1)),We=e(()=>t("i",{class:"fas fa-user-circle mr-2"},null,-1)),qe=e(()=>t("strong",null,"Account Name:",-1)),Pe=e(()=>t("br",null,null,-1)),Ue=e(()=>t("i",{class:"fas fa-id-card mr-2"},null,-1)),Ve=e(()=>t("strong",null,"Account Number:",-1)),He=e(()=>t("br",null,null,-1)),Ge={class:"mt-6"},ze={class:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-4 px-4"},Ke={class:"bg-blue-50 text-center shadow rounded-2xl p-4 flex flex-col items-center justify-center"},Je={class:"text-md font-semibold"},Qe=e(()=>t("div",{class:"text-sm text-gray-500 mt-1"},"Total Credit",-1)),Xe={class:"bg-red-50 text-center shadow rounded-2xl p-4 flex flex-col items-center justify-center"},Ze={class:"text-md font-semibold"},Fe=e(()=>t("div",{class:"text-sm text-gray-500 mt-1"},"Total Debits",-1)),ts={class:"bg-green-50 text-center shadow rounded-2xl p-4 flex flex-col items-center justify-center"},es={class:"text-md font-semibold"},ss=e(()=>t("div",{class:"text-sm text-gray-500 mt-1"},"Avg. Monthly Credit",-1)),os={class:"bg-purple-50 text-center shadow rounded-2xl p-4 flex flex-col items-center justify-center"},ns={class:"text-md font-semibold"},as=e(()=>t("div",{class:"text-sm text-gray-500 mt-1"},"Avg. Monthly Debits",-1)),ls={class:"bg-gray-100 text-center shadow rounded-2xl p-4 flex flex-col items-center justify-center"},cs={class:"text-md font-semibold"},ds=e(()=>t("div",{class:"text-sm text-gray-500 mt-1"},"Average Monthly Balance",-1)),is={class:"flex flex-col md:flex-row gap-4 p-4"},rs={class:"bg-white rounded-2xl shadow-md p-4 w-full md:w-1/3"},us=e(()=>t("p",{class:"text-sm text-gray-500 mb-1"},"Most Frequent Expense",-1)),_s={class:"font-semibold text-gray-800 leading-tight"},hs=e(()=>t("br",null,null,-1)),fs={class:"bg-white rounded-2xl shadow-md p-4 w-full md:w-1/3"},ms=e(()=>t("p",{class:"text-sm text-gray-500 mb-1"},"Highest Spend",-1)),ps={class:"font-semibold text-gray-800 text-lg"},vs={class:"text-sm font-semibold text-gray-600 mt-1"},ys={class:"bg-white rounded-2xl shadow-md p-4 w-full md:w-1/3"},xs=e(()=>t("p",{class:"text-sm text-gray-500 mb-1"},"Most Frequent Expense Amount",-1)),gs={class:"font-semibold text-gray-800 text-lg"},bs={class:"bg-white p-6 rounded-2xl shadow-md overflow-x-auto"},ws=e(()=>t("h2",{class:"text-lg font-semibold text-gray-800 m-4"},"Expenses",-1)),Ms={class:"min-w-full table-auto border-collapse"},Ts=e(()=>t("thead",null,[t("tr",{class:"text-left text-sm font-semibold text-gray-600 border-b border-gray-200"},[t("th",{class:"py-3 px-4"},"Expenses"),t("th",{class:"py-3 px-4"},"Average Monthly Expenditure"),t("th",{class:"py-3 px-4"},"Total Expenditure")])],-1)),Ys={class:"py-3 px-4"},As={class:"py-3 px-4"},Os={class:"py-3 px-4"},ks={class:"flex flex-col md:flex-row gap-4 text-center text-gray-500 py-10"},Ss={class:"flex-1 bg-white border p-6 rounded-xl shadow"},Is=e(()=>t("h2",{class:"text-lg font-semibold text-blue-800 mb-4"},"Inflow Summary",-1)),Ns={class:"space-y-2"},Ds={class:"flex justify-between"},Rs=e(()=>t("span",null,"Total Inflow",-1)),$s={class:"text-green-600 font-bold"},js={class:"flex justify-between"},Cs=e(()=>t("span",null,"Average Monthly Inflow",-1)),Bs={class:"font-medium"},Ls={class:"flex justify-between"},Es=e(()=>t("span",null,"Average Weekly Inflow",-1)),Ws={class:"font-medium"},qs={class:"flex-1 bg-white border p-6 rounded-xl shadow"},Ps=e(()=>t("h2",{class:"text-lg font-semibold text-blue-800 mb-4"},"Outflow Summary",-1)),Us={class:"space-y-2"},Vs={class:"flex justify-between"},Hs=e(()=>t("span",null,"Total Outflow",-1)),Gs={class:"text-red-600 font-bold"},zs={class:"flex justify-between"},Ks=e(()=>t("span",null,"Average Monthly Outflow",-1)),Js={class:"font-medium"},Qs={class:"flex justify-between"},Xs=e(()=>t("span",null,"Average Weekly Outflow",-1)),Zs={class:"font-medium"},Fs={class:"flex gap-4 justify-between p-2"},to={class:"flex justify-between bg-[#1f4e99] text-white rounded-2xl p-6 w-full"},eo={class:"flex-1 text-md font-semibold"},so=e(()=>t("div",{class:"text-sm mt-2"},"Average Monthly Balance",-1)),oo={class:"flex-1 text- text-md font-semibold"},no=e(()=>t("div",{class:"text-sm mt-2"},"Average Weekly Balance",-1)),ao=e(()=>t("div",{class:"flex justify-between bg-[#1f4e99] text-white rounded-2xl p-6 w-full"},[t("div",{class:"flex-1"},[t("div",{class:"text-md font-semibold"},"Negative Cash Flow"),t("div",{class:"text-sm mt-2"},"Inflow to Outflow Rate")]),t("div",{class:"flex-1"},[t("div",{class:"text-md font-semibold"},"Negative Cash Flow"),t("div",{class:"text-sm mt-2"},"Overall Inflow to Outflow")])],-1)),lo={class:"p-2 rounded-lg shadow-md"},co=e(()=>t("h2",{class:"text-lg font-semibold text-gray-800 mb-2 mt-2"}," Credit & Debit Summary ",-1)),io={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},ro={class:"bg-white p-4 rounded-lg shadow"},uo=e(()=>t("h3",{class:"text-lg font-bold text-gray-700 mb-3"},"Monthly Credit & Debit",-1)),_o={class:"overflow-y-auto max-h-96"},ho={class:"min-w-full table-auto text-sm text-left text-gray-600"},fo=e(()=>t("thead",{class:"bg-gray-100 font-medium text-gray-700"},[t("tr",null,[t("th",{class:"px-2 py-2"},"Month"),t("th",{class:"px-2 py-2"},"Total Credit"),t("th",{class:"px-2 py-2"},"Total Debit")])],-1)),mo={class:"px-2 py-2"},po={class:"px-2 py-2"},vo={class:"px-2 py-2"},yo={class:"bg-white p-4 rounded-lg shadow"},xo=e(()=>t("h3",{class:"text-lg font-bold text-gray-700 mb-3"},"Weekly Credit & Debit",-1)),go={class:"overflow-y-auto max-h-96"},bo={class:"min-w-full table-auto text-sm text-left text-gray-600"},wo=e(()=>t("thead",{class:"bg-gray-100 font-medium text-gray-700"},[t("tr",null,[t("th",{class:"px-2 py-2"},"Week"),t("th",{class:"px-2 py-2"},"Total Credit"),t("th",{class:"px-2 py-2"},"Total Debit")])],-1)),Mo={class:"px-2 py-2"},To={class:"px-2 py-2"},Yo={class:"px-2 py-2"},Ao={class:"grid grid-cols-1 md:grid-cols-2 gap-6 text-sm"},Oo={class:"bg-white p-6 rounded-2xl shadow-md"},ko=e(()=>t("h2",{class:"text-lg font-semibold text-blue-700 mb-4"},"Loan Analysis",-1)),So={class:"space-y-2"},Io={class:"flex justify-between"},No=e(()=>t("span",null,"Number of Loan Transactions",-1)),Do={class:"flex justify-between"},Ro=e(()=>t("span",null,"Total Loan Amount",-1)),$o={class:"flex justify-between"},jo=e(()=>t("span",null,"Average Monthly Loan Amount",-1)),Co={class:"flex justify-between"},Bo=e(()=>t("span",null,"Total Loan Repayment Amount",-1)),Lo={class:"flex justify-between"},Eo=e(()=>t("span",null,"Average Monthly Loan Repayment Amount",-1)),Wo={class:"flex justify-between"},qo=e(()=>t("span",null,"Loan to Inflow Rate",-1)),Po={class:"flex justify-between"},Uo=e(()=>t("span",null,"Latest Loan Transaction Date",-1)),Vo={class:"flex justify-between"},Ho=e(()=>t("span",null,"Latest Loan Repayment Transaction Date",-1)),Go={class:"bg-white p-6 rounded-2xl shadow-md"},zo=e(()=>t("h2",{class:"text-lg font-semibold text-blue-700 mb-4"},"Patterns",-1)),Ko={class:"space-y-2"},Jo={class:"flex justify-between"},Qo=e(()=>t("span",null,"Account Sweep",-1)),Xo={class:"flex justify-between"},Zo=e(()=>t("span",null,"Number of Betting Transactions",-1)),Fo={class:"flex justify-between"},tn=e(()=>t("span",null,"Gambling Rate",-1)),en={class:"flex justify-between"},sn=e(()=>t("span",null,"Percentage of Debit Transactions",-1)),on={class:"flex justify-between"},nn=e(()=>t("span",null,"Percentage of Credit Transactions",-1)),an={class:"flex justify-between"},ln=e(()=>t("span",null,"Percentage of Transactions between 500k - 1M",-1)),cn={class:"flex justify-between"},dn=e(()=>t("span",null,"Percentage of Transactions Greater Than 1M",-1)),rn={class:"flex justify-between"},un=e(()=>t("span",null,"Most Frequent Balance Range",-1)),_n={class:"flex flex-wrap gap-4 justify-between mt-4"},hn={class:"bg-[#2059a5] text-white p-6 rounded-2xl w-full md:w-[48%] shadow"},fn={class:"grid grid-cols-3 gap-4 text-sm md:text-base"},mn=e(()=>t("div",null,null,-1)),pn=e(()=>t("div",{class:"text-center font-medium"},"Outflow",-1)),vn=e(()=>t("div",{class:"text-center font-medium"},"Inflow",-1)),yn=e(()=>t("div",{class:"text-left"},"Number of Self Transfers",-1)),xn={class:"text-center font-semibold"},gn={class:"text-center font-semibold"},bn=e(()=>t("div",{class:"text-left"},"Value of Self Transfers",-1)),wn={class:"text-center font-semibold"},Mn={class:"text-center font-semibold"},Tn={class:"bg-[#2059a5] text-white p-6 rounded-2xl w-full md:w-[48%] shadow"},Yn={class:"grid grid-cols-2 gap-4 text-center"},An={class:"text-2xl font-bold"},On=e(()=>t("div",{class:"text-sm"},"Total Transactions",-1)),kn={class:"text-2xl font-bold"},Sn=e(()=>t("div",{class:"text-sm"},"Returned Cheque",-1)),In={class:"flex flex-col md:flex-row gap-6 justify-between mt-4"},Nn={class:"w-full md:w-1/2"},Dn=e(()=>t("h3",{class:"font-semibold text-sm md:text-base mb-2"}," Self Transfer Transactions ",-1)),Rn={class:"bg-white rounded-xl border shadow p-4 max-h-96 overflow-y-auto"},$n={class:"w-full text-sm text-left"},jn=e(()=>t("thead",{class:"text-gray-600"},[t("tr",null,[t("th",{class:"py-2 px-4"},"Month"),t("th",{class:"py-2 px-4"},"Inflow"),t("th",{class:"py-2 px-4"},"Outflow")])],-1)),Cn={key:0},Bn=e(()=>t("td",{colspan:"3",class:"text-center py-4 text-gray-500"}," No data available ",-1)),Ln=[Bn],En={class:"py-2 px-4"},Wn={class:"py-2 px-4"},qn={class:"py-2 px-4"},Pn={class:"w-full md:w-1/2"},Un=e(()=>t("h3",{class:"font-semibold text-sm md:text-base mb-2"}," Account Balance Analysis ",-1)),Vn={class:"bg-white border rounded-xl shadow p-4 max-h-96 overflow-y-auto"},Hn={class:"w-full text-sm text-left"},Gn=e(()=>t("thead",{class:"text-gray-600"},[t("tr",null,[t("th",{class:"py-2 px-4"},"Month"),t("th",{class:"py-2 px-4"},"Highest Balance"),t("th",{class:"py-2 px-4"},"Lowest Balance")])],-1)),zn={class:"py-2 px-4"},Kn={class:"py-2 px-4"},Jn={class:"py-2 px-4"},Qn=e(()=>t("div",{class:"text-center text-gray-500 py-10"},"Transactions Content",-1)),Xn={__name:"StatementAnalysis",setup(P){const U=s("Summary");function c(i){return new Intl.NumberFormat("en-NG",{style:"currency",currency:"NGN",minimumFractionDigits:2}).format(i||0)}const J=xe(),R=ge(),Qt=s(null),V=s(!0),st=s(null),Xt=s(""),ot=s(""),Q=s(""),nt=s(""),at=s(0),lt=s(0),X=s(0),Z=s(0),F=s(0),ct=s(0),dt=s(0),Zt=s(0),it=s(0),rt=s(0),Ft=s(0),ut=s(0),_t=s([]),ht=s([]),ft=s(0),mt=s(0),pt=s(0),vt=s(""),yt=s([]),xt=s(""),gt=s(""),bt=s(""),wt=s(""),Mt=s(0),tt=s(""),Tt=s(0),Yt=s(""),te=s(0),ee=s(0),At=s(0),Ot=s(0),kt=s(0),St=s(0),It=s(0),se=s(0),oe=s(0),Nt=s(""),Dt=s([]),Rt=s(""),ne=s(""),ae=s(0),le=s(""),$t=s(0),jt=s(0),Ct=s(0),Bt=s(0),Lt=s(0),Et=s(0),Wt=s(0),H=s([]),qt=s([]),ce=async i=>{var M,Y,T,O,l,y,G,z,k,Pt,Ut,Vt,Ht;const h=JSON.parse(localStorage.getItem("data")||"{}"),S=(h==null?void 0:h.token)||R.token,I=`https://dev02201.getjupita.com/api/${((M=h==null?void 0:h.user)==null?void 0:M.tenant_id)||R.tenant_id}/get-analysis-result?analysis_id=${i}`;V.value=!0;try{let zt=function(a){return v(a,"M-YYYY").format("MMM YYYY")};const N=await et.get(I,{headers:{Authorization:`Bearer ${S}`,"Content-Type":"application/json"}});console.log("statement analysis result page data:",N),Qt.value=N.data;const d=(O=(T=(Y=N.data)==null?void 0:Y.data)==null?void 0:T.analysis_result)==null?void 0:O.analysis_result;Xt.value=(d==null?void 0:d.name)||"N/A",ot.value=(d==null?void 0:d.clientFullName)||"N/A",nt.value=(d==null?void 0:d.accountId)||"N/A";const u=(d==null?void 0:d.behavioralAnalysis)||{};tt.value=u.accountSweep||"No",Tt.value=u.gamblingRate||0,Yt.value=u.gamblingStatus||"N/A",te.value=u.loanInflowRate||0,ee.value=u.accountActivity||0,At.value=u.totalLoanAmount||0,Ot.value=u.loanToInflowRate||0,kt.value=u.numberLoanTransactions||0,St.value=u.averageMonthlyLoanAmount||0,It.value=u.totalLoanRepaymentAmount||0,se.value=u.loanRepaymentToInflowRate||0,oe.value=u.numberRepaymentTransactions||0,Dt.value=u.latestRepaymentTransaction||[];const K=Dt.value[0]||null;Rt.value=K!=null&&K.date?v(K.date).format("MMM D, YYYY"):"N/A";const Gt=(l=u.latestLoanTransaction)==null?void 0:l[0];Nt.value=Gt?v(Gt.date).format("MMMM D, YYYY"):"N/A",ne.value=u.overallInflowToOutflowRate||"N/A",ae.value=u.percentOfInflowIrregularity||0,le.value=u.monthToMonthInflowToOutflowRate||"N/A",$t.value=u.averageMonthlyLoanRepaymentAmount||0;const n=d==null?void 0:d.cashFlowAnalysis;console.log("cash flow data:",n),ft.value=d==null?void 0:d.spendAnalysis.mostFrequentExpense,mt.value=d==null?void 0:d.spendAnalysis.mostFrequentExpenseAmount;const _=((k=(z=(G=(y=N.data)==null?void 0:y.data)==null?void 0:G.analysis_result)==null?void 0:z.analysis_result)==null?void 0:k.spendAnalysis)||{},m=((Ht=(Vt=(Ut=(Pt=N.data)==null?void 0:Pt.data)==null?void 0:Ut.analysis_result)==null?void 0:Vt.analysis_result)==null?void 0:Ht.transactionPatternAnalysis)||{};console.log("pattern analysis:",m),xt.value=(m.percentDebitTransactions*100).toFixed(2)+"%",gt.value=(m.percentDebitTransactions*100).toFixed(2)+"%",bt.value=(m.percentOfTransactionsBetween500ThousandToOneMillionNaira*100).toFixed(2)+"%",wt.value=(m.percentOfTransactionsGreaterThanOneMillionNaira*100).toFixed(2)+"%",Mt.value=m.mostFrequentBalanceRange,jt.value=m.noOfSelfTransferInflows,Ct.value=m.noOfSelfTransferOutflows,Bt.value=m.selfTransferInflowAmount,Lt.value=m.selfTransferOutflowAmount,Et.value=m.totalNumberOfTransactions,Wt.value=m.returnCheque;const re=m.selfTransferInflowTransactionsByMonth||[],ue=m.selfTransferOutflowTransactionsByMonth||[],j=new Map;re.forEach(a=>{const r=zt(a.date);j.set(r,{month:r,inflow:a.amount,outflow:0})}),ue.forEach(a=>{const r=zt(a.date);j.has(r)?j.get(r).outflow=a.amount:j.set(r,{month:r,inflow:0,outflow:a.amount})}),H.value=Array.from(j.values()).sort((a,r)=>v(a.month,"MMM YYYY")-v(r.month,"MMM YYYY")),pt.value=_.highestSpend,vt.value=v(_.monthWithHighestSpend,"M/YYYY").format("MMMM YYYY"),yt.value=[{label:"Others",monthly:_.averageMonthlySpendOnOthers??0,total:12*(_.averageMonthlySpendOnOthers??0)},{label:"Rent",monthly:_.averageMonthlySpendOnRent??0,total:12*(_.averageMonthlySpendOnRent??0)},{label:"Hospitality and Food",monthly:_.averageMonthlySpendOnHospitalityAndFood??0,total:12*(_.averageMonthlySpendOnHospitalityAndFood??0)},{label:"Transportation",monthly:_.averageMonthlySpendOnTransportation??0,total:12*(_.averageMonthlySpendOnTransportation??0)},{label:"Utilities",monthly:_.averageMonthlySpendOnUtilities??0,total:12*(_.averageMonthlySpendOnUtilities??0)},{label:"Charges and Stamp Duty",monthly:_.averageMonthlySpendOnChargesAndStampDuty??0,total:12*(_.averageMonthlySpendOnChargesAndStampDuty??0)},{label:"Transfer",monthly:_.averageMonthlySpendOnTransfer??0,total:12*(_.averageMonthlySpendOnTransfer??0)},{label:"ATM Withdrawals and POS",monthly:_.averageMonthlySpendOnAtmAndPOS??0,total:12*(_.averageMonthlySpendOnAtmAndPOS??0)}],at.value=(n==null?void 0:n.totalDebitTurnOver)||0,lt.value=(n==null?void 0:n.totalCreditTurnover)||0,X.value=(n==null?void 0:n.averageMonthlyDebits)||0,Z.value=(n==null?void 0:n.averageMonthlyCredits)||0,F.value=(n==null?void 0:n.averageMonthlyBalance)||0,ct.value=(n==null?void 0:n.averageWeeklyBalance)||0,dt.value=(n==null?void 0:n.totalCreditTurnover)||0,Zt.value=(n==null?void 0:n.averageMonthlyCredits)||0,it.value=(n==null?void 0:n.averageWeeklyCredits)||0,rt.value=(n==null?void 0:n.totalDebitTurnOver)||0,Ft.value=(n==null?void 0:n.averageMonthlyDebits)||0,ut.value=(n==null?void 0:n.averageWeeklyDebits)||0;const _e=(n==null?void 0:n.monthlyHighestBalance)||[],he=(n==null?void 0:n.monthlyLowestBalance)||[],C=new Map;_e.forEach(a=>{const r=`${a.month_name} ${a.year}`,x=v(r,"MMMM YYYY").format("MMM YYYY"),A=`${a.month_name}-${a.year}`;C.set(A,{month:x,highest:a.highest_balance,lowest:0})}),he.forEach(a=>{const r=`${a.month_name} ${a.year}`,x=v(r,"MMMM YYYY").format("MMM YYYY"),A=`${a.month_name}-${a.year}`;C.has(A)?C.get(A).lowest=a.lowest_balance:C.set(A,{month:x,highest:0,lowest:a.lowest_balance})}),qt.value=Array.from(C.values());const fe=(n==null?void 0:n.monthlyInflow)||[],me=(n==null?void 0:n.monthlyOutflow)||[],B=new Map;fe.forEach(a=>{const r=`${a.month_name} ${a.year}`,x=v(r,"MMMM YYYY").format("MMM YYYY"),A=`${a.month_name}-${a.year}`;B.set(A,{month:x,credit:a.amount,debit:0})}),me.forEach(a=>{const r=`${a.month_name} ${a.year}`,x=v(r,"MMMM YYYY").format("MMM YYYY"),A=`${a.month_name}-${a.year}`;B.has(A)?B.get(A).debit=a.amount:B.set(A,{month:x,credit:0,debit:a.amount})}),_t.value=Array.from(B.values());const pe=(n==null?void 0:n.weeklyInflow)||[],ve=(n==null?void 0:n.weeklyOutflow)||[],L=new Map;pe.forEach(a=>{const r=v().month(a.month_name).format("MMM"),x=`${a.year}-${r}-W${a.week}`;L.set(x,{week:`${r} ${a.year} | ${a.week}`,credit:a.amount,debit:0})}),ve.forEach(a=>{const r=v().month(a.month_name).format("MMM"),x=`${a.year}-${r}-W${a.week}`;L.has(x)?L.get(x).debit=a.amount:L.set(x,{week:`${r} ${a.year} ${a.week}`,credit:0,debit:a.amount})}),ht.value=Array.from(L.values());const Kt=new Date(d==null?void 0:d.startDate),Jt=new Date(d==null?void 0:d.endDate);!isNaN(Kt)&&!isNaN(Jt)?Q.value=`${v(Kt).format("MMMM D, YYYY")} - ${v(Jt).format("MMMM D, YYYY")}`:Q.value="Unknown period"}catch(N){console.error("Error fetching analysis result:",N),st.value="Unable to fetch analysis result."}finally{V.value=!1}},de=async()=>{var M;const i=JSON.parse(localStorage.getItem("data")||"{}"),h=(i==null?void 0:i.token)||R.token,S=((M=i==null?void 0:i.user)==null?void 0:M.tenant_id)||R.tenant_id,$=J.params.id,I=`https://dev02201.getjupita.com/api/${S}/get-statement-transactions?analysis_id=${$}`;try{const Y=await et.get(I,{headers:{Authorization:`Bearer ${h}`}});console.log("fetch transactions response:",Y)}catch(Y){console.error(Y)}};be(()=>{de();const i=J.params.id;i?ce(i):(st.value="Invalid analysis ID.",V.value=!1)});const ie=async()=>{var Y;const i=JSON.parse(localStorage.getItem("data")||"{}"),h=(i==null?void 0:i.token)||R.token,S=((Y=i==null?void 0:i.user)==null?void 0:Y.tenant_id)||R.tenant_id,$=J.params.id,I=`https://dev02201.getjupita.com/api/${S}/download-insight-report?analysis_id=${$}`;let M=null;try{M=q({message:"Getting your analysis report...",type:"success",duration:0,showClose:!0});const T=await et.get(I,{headers:{Authorization:`Bearer ${h}`}});console.log("download analysis response:",T.data);const O=T.data.data.download;if(!O||!O.document_url||!O.document_name)throw new Error("No download information or document URL found in the response.");q.closeAll();const l=O.document_name||"analysis_report.pdf",G=l.split(".").pop()==="pdf"?l:`${l}.pdf`,z=O.document_url,k=document.createElement("a");k.href=z,k.download=G,k.target="_blank",document.body.appendChild(k),k.click(),document.body.removeChild(k),q({message:"Analysis report downloaded successfully.",type:"success",duration:6e4})}catch(T){console.error("Download failed:",T),q.closeAll(),q.error("Failed to download analysis. Please try again.")}};return(i,h)=>{const S=D("v-progress-circular"),$=D("RouterLink"),I=D("v-btn"),M=D("v-tab"),Y=D("v-tabs"),T=D("v-tabs-window-item"),O=D("v-tabs-window");return p(),we(Me,null,{default:g(()=>[t("div",ke,[Se,V.value?(p(),b("div",Ie,[w(S,{size:100,width:10,color:"primary",indeterminate:""})])):(p(),b("div",Ne,[t("div",De,[w($,{to:"/dashboard"},{default:g(()=>[t("button",{onClick:h[0]||(h[0]=(...l)=>i.goBack&&i.goBack(...l)),class:"mb-2 flex items-center text-blue-600 font-semibold"},[Re,f(" Back ")])]),_:1}),t("div",$e,[w(I,{onClick:ie,"no-uppercase":"",size:"small",class:"normal-case p-4 bg-blue-600 hover:bg-blue-700 text-white text-none mr-2 custom-btn"},{default:g(()=>[je,f(" Download Analysis ")]),_:1})])]),t("div",Ce,[t("p",null,[Be,Le,f(),Ee,f(" "+o(Q.value),1)]),t("p",null,[We,qe,f(),Pe,f(" "+o(ot.value),1)]),t("p",null,[Ue,Ve,f(),He,f(" "+o(nt.value),1)])]),t("div",Ge,[w(Y,{"align-tabs":"center",class:"mb-6",modelValue:U.value,"onUpdate:modelValue":h[1]||(h[1]=l=>U.value=l),color:"primary"},{default:g(()=>[w(M,{value:"summary"},{default:g(()=>[f("Summary")]),_:1}),w(M,{value:"cash flow"},{default:g(()=>[f("Cash Flow")]),_:1}),w(M,{value:"behavioral"},{default:g(()=>[f("Behavioral")]),_:1}),w(M,{value:"transactions"},{default:g(()=>[f("Transactions")]),_:1})]),_:1},8,["modelValue"]),w(O,{modelValue:U.value,"onUpdate:modelValue":h[2]||(h[2]=l=>U.value=l)},{default:g(()=>[w(T,{value:"summary"},{default:g(()=>[t("div",ze,[t("div",Ke,[t("div",Je,o(c(lt.value)),1),Qe]),t("div",Xe,[t("div",Ze,o(c(at.value)),1),Fe]),t("div",ts,[t("div",es,o(c(Z.value)),1),ss]),t("div",os,[t("div",ns,o(c(X.value)),1),as]),t("div",ls,[t("div",cs,o(c(F.value)),1),ds])]),t("div",is,[t("div",rs,[us,t("p",_s,[f(o(ft.value),1),hs])]),t("div",fs,[ms,t("p",ps,o(c(pt.value)),1),t("p",vs," Transaction Date: "+o(vt.value),1)]),t("div",ys,[xs,t("p",gs,o(c(mt.value)),1)])]),t("div",bs,[ws,t("table",Ms,[Ts,t("tbody",null,[(p(!0),b(E,null,W(yt.value,(l,y)=>(p(),b("tr",{key:y,class:"text-sm text-gray-700 border-b border-gray-100 hover:bg-gray-50"},[t("td",Ys,o(l.label),1),t("td",As,o(c(l.monthly)),1),t("td",Os,o(c(l.total)),1)]))),128))])])])]),_:1}),w(T,{value:"cash flow"},{default:g(()=>[t("div",ks,[t("div",Ss,[Is,t("div",Ns,[t("div",Ds,[Rs,t("span",$s,o(c(dt.value)),1)]),t("div",js,[Cs,t("span",Bs,o(c(Z.value)),1)]),t("div",Ls,[Es,t("span",Ws,o(c(it.value)),1)])])]),t("div",qs,[Ps,t("div",Us,[t("div",Vs,[Hs,t("span",Gs,o(c(rt.value)),1)]),t("div",zs,[Ks,t("span",Js,o(c(X.value)),1)]),t("div",Qs,[Xs,t("span",Zs,o(c(ut.value)),1)])])])]),t("div",Fs,[t("div",to,[t("div",eo,[f(o(c(F.value))+" ",1),so]),t("div",oo,[f(o(c(ct.value))+" ",1),no])]),ao]),t("div",lo,[co,t("div",io,[t("div",ro,[uo,t("div",_o,[t("table",ho,[fo,t("tbody",null,[(p(!0),b(E,null,W(_t.value,(l,y)=>(p(),b("tr",{key:y,class:"border-b"},[t("td",mo,o(l.month),1),t("td",po,o(c(l.credit)),1),t("td",vo,o(c(l.debit)),1)]))),128))])])])]),t("div",yo,[xo,t("div",go,[t("table",bo,[wo,t("tbody",null,[(p(!0),b(E,null,W(ht.value,(l,y)=>(p(),b("tr",{key:y,class:"border-b"},[t("td",Mo,o(l.week),1),t("td",To,o(c(l.credit)),1),t("td",Yo,o(c(l.debit)),1)]))),128))])])])])])])]),_:1}),w(T,{value:"behavioral"},{default:g(()=>[t("div",Ao,[t("div",Oo,[ko,t("div",So,[t("div",Io,[No,t("span",null,o(kt.value),1)]),t("div",Do,[Ro,t("span",null,o(c(At.value)),1)]),t("div",$o,[jo,t("span",null,o(c(St.value)),1)]),t("div",Co,[Bo,t("span",null,o(c(It.value)),1)]),t("div",Lo,[Eo,t("span",null,o(c($t.value)),1)]),t("div",Wo,[qo,t("span",null,o(Ot.value)+"%",1)]),t("div",Po,[Uo,t("span",null,o(Nt.value),1)]),t("div",Vo,[Ho,t("span",null,o(Rt.value),1)])])]),t("div",Go,[zo,t("div",Ko,[t("div",Jo,[Qo,t("span",{class:Te(["font-semibold",tt.value==="YES"?"text-green-600":"text-gray-600"])},o(tt.value),3)]),t("div",Xo,[Zo,t("span",null,o(Yt.value),1)]),t("div",Fo,[tn,t("span",null,o(Tt.value),1)]),t("div",en,[sn,t("span",null,o(xt.value),1)]),t("div",on,[nn,t("span",null,o(gt.value),1)]),t("div",an,[ln,t("span",null,o(bt.value),1)]),t("div",cn,[dn,t("span",null,o(wt.value),1)]),t("div",rn,[un,t("span",null,o(Mt.value),1)])])])]),t("div",_n,[t("div",hn,[t("div",fn,[mn,pn,vn,yn,t("div",xn,o(Ct.value),1),t("div",gn,o(jt.value),1),bn,t("div",wn,o(c(Lt.value)),1),t("div",Mn,o(c(Bt.value)),1)])]),t("div",Tn,[t("div",Yn,[t("div",null,[t("div",An,o(Et.value),1),On]),t("div",null,[t("div",kn,o(Wt.value),1),Sn])])])]),t("div",In,[t("div",Nn,[Dn,t("div",Rn,[t("table",$n,[jn,t("tbody",null,[!H.value||H.value.length===0?(p(),b("tr",Cn,Ln)):Ye("",!0),(p(!0),b(E,null,W(H.value,(l,y)=>(p(),b("tr",{key:y,class:"border-b last:border-none"},[t("td",En,o(l.month),1),t("td",Wn,o(c(l.inflow)),1),t("td",qn,o(c(l.outflow)),1)]))),128))])])])]),t("div",Pn,[Un,t("div",Vn,[t("table",Hn,[Gn,t("tbody",null,[(p(!0),b(E,null,W(qt.value,(l,y)=>(p(),b("tr",{key:y},[t("td",zn,o(l.month),1),t("td",Kn,o(c(l.highest)),1),t("td",Jn,o(c(l.lowest)),1)]))),128))])])])])])]),_:1}),w(T,{value:"transactions"},{default:g(()=>[Qn]),_:1})]),_:1},8,["modelValue"])])]))])]),_:1})}}},Fn=ye(Xn,[["__scopeId","data-v-ea592d99"]]);export{Fn as default};
