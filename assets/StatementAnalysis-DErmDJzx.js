import{b as ut,_ as $e,r as n,u as Be,e as Ve,f as tt,g as Ue,o as We,h as g,i as w,j as Pe,w as m,M as qe,k as xt,l as A,m as t,n as k,p as c,q as x,t as o,F as et,s as st,v as ce,x as He,y as re,E as At,z as Ge,A as ze}from"./index-D0IlsNqa.js";var ue={exports:{}};(function(G,ot){(function(z,W){W()})(ut,function(){function z(r,f){return typeof f>"u"?f={autoBom:!1}:typeof f!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),f={autoBom:!f}),f.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(r.type)?new Blob(["\uFEFF",r],{type:r.type}):r}function W(r,f,D){var p=new XMLHttpRequest;p.open("GET",r),p.responseType="blob",p.onload=function(){F(p.response,f,D)},p.onerror=function(){console.error("could not download file")},p.send()}function i(r){var f=new XMLHttpRequest;f.open("HEAD",r,!1);try{f.send()}catch{}return 200<=f.status&&299>=f.status}function P(r){try{r.dispatchEvent(new MouseEvent("click"))}catch{var f=document.createEvent("MouseEvents");f.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),r.dispatchEvent(f)}}var O=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof ut=="object"&&ut.global===ut?ut:void 0,C=O.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),F=O.saveAs||(typeof window!="object"||window!==O?function(){}:"download"in HTMLAnchorElement.prototype&&!C?function(r,f,D){var p=O.URL||O.webkitURL,b=document.createElement("a");f=f||r.name||"download",b.download=f,b.rel="noopener",typeof r=="string"?(b.href=r,b.origin===location.origin?P(b):i(b.href)?W(r,f,D):P(b,b.target="_blank")):(b.href=p.createObjectURL(r),setTimeout(function(){p.revokeObjectURL(b.href)},4e4),setTimeout(function(){P(b)},0))}:"msSaveOrOpenBlob"in navigator?function(r,f,D){if(f=f||r.name||"download",typeof r!="string")navigator.msSaveOrOpenBlob(z(r,D),f);else if(i(r))W(r,f,D);else{var p=document.createElement("a");p.href=r,p.target="_blank",setTimeout(function(){P(p)})}}:function(r,f,D,p){if(p=p||open("","_blank"),p&&(p.document.title=p.document.body.innerText="downloading..."),typeof r=="string")return W(r,f,D);var b=r.type==="application/octet-stream",_t=/constructor/i.test(O.HTMLElement)||O.safari,nt=/CriOS\/[\d]+/.test(navigator.userAgent);if((nt||b&&_t||C)&&typeof FileReader<"u"){var K=new FileReader;K.onloadend=function(){var $=K.result;$=nt?$:$.replace(/^data:[^;]*;/,"data:attachment/file;"),p?p.location.href=$:location=$,p=null},K.readAsDataURL(r)}else{var J=O.URL||O.webkitURL,q=J.createObjectURL(r);p?p.location=q:location.href=q,p=null,setTimeout(function(){J.revokeObjectURL(q)},4e4)}});O.saveAs=F.saveAs=F,G.exports=F})})(ue);var Fe=ue.exports;const s=G=>(Ge("data-v-9e3751ff"),G=G(),ze(),G),Ke={class:"p-2"},Je={key:0,class:"flex items-center justify-center h-96"},Xe={key:1,class:"p-2 md:p-8"},Qe=s(()=>t("i",{class:"fas fa-circle-arrow-left mr-2",style:{color:"#2563eb"}},null,-1)),Ze={class:"flex justify-between rounded shadow-lg p-4 bg-white"},ts=s(()=>t("h2",{class:"text-md font-semibold mt-2 ml-6"},"Analysis result",-1)),es={class:"text-right"},ss=s(()=>t("i",{class:"fas fa-download mr-2"},null,-1)),os={class:"grid grid-cols-1 md:grid-cols-3 gap-6 text-gray-700 mt-4 mb-6 bg-white rounded shadow-lg p-4"},ns=s(()=>t("i",{class:"fas fa-calendar mr-2"},null,-1)),as=s(()=>t("strong",null,"Statement Period:",-1)),ls=s(()=>t("br",null,null,-1)),ds={class:"mt-3"},is=s(()=>t("i",{class:"fas fa-user-circle mr-2"},null,-1)),cs=s(()=>t("strong",null,"Account Name:",-1)),rs=s(()=>t("br",null,null,-1)),us=s(()=>t("i",{class:"fas fa-id-card mr-2"},null,-1)),_s=s(()=>t("strong",null,"Account Number:",-1)),fs=s(()=>t("br",null,null,-1)),ms={class:"mt-6"},ps={class:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-4 px-4"},hs={class:"bg-blue-50 text-center shadow rounded-2xl p-4 flex flex-col items-center justify-center"},vs={class:"text-md font-semibold"},ys=s(()=>t("div",{class:"text-sm text-gray-500 mt-1"},"Total Credit",-1)),xs={class:"bg-red-50 text-center shadow rounded-2xl p-4 flex flex-col items-center justify-center"},bs={class:"text-md font-semibold"},gs=s(()=>t("div",{class:"text-sm text-gray-500 mt-1"},"Total Debits",-1)),ws={class:"bg-green-50 text-center shadow rounded-2xl p-4 flex flex-col items-center justify-center"},Ms={class:"text-md font-semibold"},Ts=s(()=>t("div",{class:"text-sm text-gray-500 mt-1"},"Avg. Monthly Credit",-1)),As={class:"bg-purple-50 text-center shadow rounded-2xl p-4 flex flex-col items-center justify-center"},ks={class:"text-md font-semibold"},Os=s(()=>t("div",{class:"text-sm text-gray-500 mt-1"},"Avg. Monthly Debits",-1)),Ys={class:"bg-gray-100 text-center shadow rounded-2xl p-4 flex flex-col items-center justify-center"},Ss={class:"text-md font-semibold"},Rs=s(()=>t("div",{class:"text-sm text-gray-500 mt-1"},"Average Monthly Balance",-1)),Ds={class:"flex flex-col md:flex-row gap-4 p-4"},Is={class:"bg-white rounded-2xl shadow-md p-4 w-full md:w-1/3"},js=s(()=>t("p",{class:"text-sm text-gray-500 mb-1"},"Most Frequent Expense",-1)),Ns={class:"font-semibold text-gray-800 leading-tight"},Es=s(()=>t("br",null,null,-1)),Ls={class:"bg-white rounded-2xl shadow-md p-4 w-full md:w-1/3"},Cs=s(()=>t("p",{class:"text-sm text-gray-500 mb-1"},"Highest Spend",-1)),$s={class:"font-semibold text-gray-800 text-lg"},Bs={class:"text-sm font-semibold text-gray-600 mt-1"},Vs={class:"bg-white rounded-2xl shadow-md p-4 w-full md:w-1/3"},Us=s(()=>t("p",{class:"text-sm text-gray-500 mb-1"},"Most Frequent Expense Amount",-1)),Ws={class:"font-semibold text-gray-800 text-lg"},Ps={class:"bg-white p-6 rounded-2xl shadow-md overflow-x-auto"},qs=s(()=>t("h2",{class:"text-lg font-semibold text-gray-800 m-4"},"Expenses",-1)),Hs={class:"min-w-full table-auto border-collapse"},Gs=s(()=>t("thead",null,[t("tr",{class:"text-left text-sm font-semibold text-gray-600 border-b border-gray-200"},[t("th",{class:"py-3 px-4"},"Expenses"),t("th",{class:"py-3 px-4"},"Average Monthly Expenditure"),t("th",{class:"py-3 px-4"},"Total Expenditure")])],-1)),zs={class:"py-3 px-4"},Fs={class:"py-3 px-4"},Ks={class:"py-3 px-4"},Js={class:"flex flex-col md:flex-row gap-4 text-center text-gray-500 py-10"},Xs={class:"flex-1 bg-white border p-6 rounded-xl shadow"},Qs=s(()=>t("h2",{class:"text-lg font-semibold text-blue-800 mb-4"},"Inflow Summary",-1)),Zs={class:"space-y-2"},to={class:"flex justify-between"},eo=s(()=>t("span",null,"Total Inflow",-1)),so={class:"text-green-600 font-bold"},oo={class:"flex justify-between"},no=s(()=>t("span",null,"Average Monthly Inflow",-1)),ao={class:"font-medium"},lo={class:"flex justify-between"},io=s(()=>t("span",null,"Average Weekly Inflow",-1)),co={class:"font-medium"},ro={class:"flex-1 bg-white border p-6 rounded-xl shadow"},uo=s(()=>t("h2",{class:"text-lg font-semibold text-blue-800 mb-4"},"Outflow Summary",-1)),_o={class:"space-y-2"},fo={class:"flex justify-between"},mo=s(()=>t("span",null,"Total Outflow",-1)),po={class:"text-red-600 font-bold"},ho={class:"flex justify-between"},vo=s(()=>t("span",null,"Average Monthly Outflow",-1)),yo={class:"font-medium"},xo={class:"flex justify-between"},bo=s(()=>t("span",null,"Average Weekly Outflow",-1)),go={class:"font-medium"},wo={class:"flex gap-4 justify-between p-2"},Mo={class:"flex justify-between bg-[#1f4e99] text-white rounded-2xl p-6 w-full"},To={class:"flex-1 text-md font-semibold"},Ao=s(()=>t("div",{class:"text-sm mt-2"},"Average Monthly Balance",-1)),ko={class:"flex-1 text- text-md font-semibold"},Oo=s(()=>t("div",{class:"text-sm mt-2"},"Average Weekly Balance",-1)),Yo=s(()=>t("div",{class:"flex justify-between bg-[#1f4e99] text-white rounded-2xl p-6 w-full"},[t("div",{class:"flex-1"},[t("div",{class:"text-md font-semibold"},"Negative Cash Flow"),t("div",{class:"text-sm mt-2"},"Inflow to Outflow Rate")]),t("div",{class:"flex-1"},[t("div",{class:"text-md font-semibold"},"Negative Cash Flow"),t("div",{class:"text-sm mt-2"},"Overall Inflow to Outflow")])],-1)),So={class:"p-2 rounded-lg shadow-md"},Ro=s(()=>t("h2",{class:"text-lg font-semibold text-gray-800 mb-2 mt-2"}," Credit & Debit Summary ",-1)),Do={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},Io={class:"bg-white p-4 rounded-lg shadow"},jo=s(()=>t("h3",{class:"text-lg font-bold text-gray-700 mb-3"},"Monthly Credit & Debit",-1)),No={class:"overflow-y-auto max-h-96"},Eo={class:"min-w-full table-auto text-sm text-left text-gray-600"},Lo=s(()=>t("thead",{class:"bg-gray-100 font-medium text-gray-700"},[t("tr",null,[t("th",{class:"px-2 py-2"},"Month"),t("th",{class:"px-2 py-2"},"Total Credit"),t("th",{class:"px-2 py-2"},"Total Debit")])],-1)),Co={class:"px-2 py-2"},$o={class:"px-2 py-2"},Bo={class:"px-2 py-2"},Vo={class:"font-semibold text-gray-800 bg-gray-50 border-t"},Uo=s(()=>t("td",{class:"px-2 py-2"},"Total",-1)),Wo={class:"px-2 text-green-800 py-2"},Po={class:"px-2 text-red-800 py-2"},qo={class:"bg-white p-4 rounded-lg shadow"},Ho=s(()=>t("h3",{class:"text-lg font-bold text-gray-700 mb-3"},"Weekly Credit & Debit",-1)),Go={class:"overflow-y-auto max-h-96"},zo={class:"min-w-full table-auto text-sm text-left text-gray-600"},Fo=s(()=>t("thead",{class:"bg-gray-100 font-medium text-gray-700"},[t("tr",null,[t("th",{class:"px-2 py-2"},"Week"),t("th",{class:"px-2 py-2"},"Total Credit"),t("th",{class:"px-2 py-2"},"Total Debit")])],-1)),Ko={class:"px-2 py-2"},Jo={class:"px-2 py-2"},Xo={class:"px-2 py-2"},Qo={class:"font-semibold text-gray-800 bg-gray-50 border-t"},Zo=s(()=>t("td",{class:"px-2 py-2"},"Total",-1)),tn={class:"px-2 text-green-800 py-2"},en={class:"px-2 text-red-800 py-2"},sn={class:"grid grid-cols-1 md:grid-cols-2 gap-6 text-sm"},on={class:"bg-white p-6 rounded-2xl shadow-md"},nn=s(()=>t("h2",{class:"text-lg font-semibold text-blue-700 mb-4"},"Loan Analysis",-1)),an={class:"space-y-2"},ln={class:"flex justify-between"},dn=s(()=>t("span",null,"Number of Loan Transactions",-1)),cn={class:"flex justify-between"},rn=s(()=>t("span",null,"Total Loan Amount",-1)),un={class:"flex justify-between"},_n=s(()=>t("span",null,"Average Monthly Loan Amount",-1)),fn={class:"flex justify-between"},mn=s(()=>t("span",null,"Total Loan Repayment Amount",-1)),pn={class:"flex justify-between"},hn=s(()=>t("span",null,"Average Monthly Loan Repayment Amount",-1)),vn={class:"flex justify-between"},yn=s(()=>t("span",null,"Loan to Inflow Rate",-1)),xn={class:"flex justify-between"},bn=s(()=>t("span",null,"Latest Loan Transaction Date",-1)),gn={class:"flex justify-between"},wn=s(()=>t("span",null,"Latest Loan Repayment Transaction Date",-1)),Mn={class:"bg-white p-6 rounded-2xl shadow-md"},Tn=s(()=>t("h2",{class:"text-lg font-semibold text-blue-700 mb-4"},"Patterns",-1)),An={class:"space-y-2"},kn={class:"flex justify-between"},On=s(()=>t("span",null,"Account Sweep",-1)),Yn={class:"flex justify-between"},Sn=s(()=>t("span",null,"Number of Betting Transactions",-1)),Rn={class:"flex justify-between"},Dn=s(()=>t("span",null,"Gambling Rate",-1)),In={class:"flex justify-between"},jn=s(()=>t("span",null,"Percentage of Debit Transactions",-1)),Nn={class:"flex justify-between"},En=s(()=>t("span",null,"Percentage of Credit Transactions",-1)),Ln={class:"flex justify-between"},Cn=s(()=>t("span",null,"Percentage of Transactions between 500k - 1M",-1)),$n={class:"flex justify-between"},Bn=s(()=>t("span",null,"Percentage of Transactions Greater Than 1M",-1)),Vn={class:"flex justify-between"},Un=s(()=>t("span",null,"Most Frequent Balance Range",-1)),Wn={class:"flex flex-wrap gap-4 justify-between mt-4"},Pn={class:"bg-[#2059a5] text-white p-6 rounded-2xl w-full md:w-[48%] shadow"},qn={class:"grid grid-cols-3 gap-4 text-sm md:text-base"},Hn=s(()=>t("div",null,null,-1)),Gn=s(()=>t("div",{class:"text-center font-medium"},"Outflow",-1)),zn=s(()=>t("div",{class:"text-center font-medium"},"Inflow",-1)),Fn=s(()=>t("div",{class:"text-left"},"Number of Self Transfers",-1)),Kn={class:"text-center font-semibold"},Jn={class:"text-center font-semibold"},Xn=s(()=>t("div",{class:"text-left"},"Value of Self Transfers",-1)),Qn={class:"text-center font-semibold"},Zn={class:"text-center font-semibold"},ta={class:"bg-[#2059a5] text-white p-6 rounded-2xl w-full md:w-[48%] shadow"},ea={class:"grid grid-cols-2 gap-4 text-center"},sa={class:"text-2xl font-bold"},oa=s(()=>t("div",{class:"text-sm"},"Total Transactions",-1)),na={class:"text-2xl font-bold"},aa=s(()=>t("div",{class:"text-sm"},"Returned Cheque",-1)),la={class:"flex flex-col md:flex-row gap-6 justify-between mt-4"},da={class:"w-full md:w-1/2"},ia=s(()=>t("h3",{class:"font-semibold text-sm md:text-base mb-2"}," Self Transfer Transactions ",-1)),ca={class:"bg-white rounded-xl border shadow p-4 max-h-96 overflow-y-auto"},ra={class:"w-full text-sm text-left"},ua=s(()=>t("thead",{class:"text-gray-600"},[t("tr",null,[t("th",{class:"py-2 px-4"},"Month"),t("th",{class:"py-2 px-4"},"Inflow"),t("th",{class:"py-2 px-4"},"Outflow")])],-1)),_a={key:0},fa=s(()=>t("td",{colspan:"3",class:"text-center py-4 text-gray-500"}," No data available ",-1)),ma=[fa],pa={class:"py-2 px-4"},ha={class:"py-2 px-4"},va={class:"py-2 px-4"},ya={class:"w-full md:w-1/2"},xa=s(()=>t("h3",{class:"font-semibold text-sm md:text-base mb-2"}," Account Balance Analysis ",-1)),ba={class:"bg-white border rounded-xl shadow p-4 max-h-96 overflow-y-auto"},ga={class:"w-full text-sm text-left"},wa=s(()=>t("thead",{class:"text-gray-600"},[t("tr",null,[t("th",{class:"py-2 px-4"},"Month"),t("th",{class:"py-2 px-4"},"Highest Balance"),t("th",{class:"py-2 px-4"},"Lowest Balance")])],-1)),Ma={class:"py-2 px-4"},Ta={class:"py-2 px-4"},Aa={class:"py-2 px-4"},ka={class:"py-4"},Oa=s(()=>t("span",{class:"text-2xl font-semibold"},"Transaction History",-1)),Ya=s(()=>t("i",{class:"fas fa-filter text-black-600 text-lg"},null,-1)),Sa=s(()=>t("thead",{class:"font-semibold text-gray-600"},[t("tr",null,[t("th",{class:"px-2 py-3 font-semibold"},"S/N"),t("th",{class:"px-2 py-3 font-semibold"},"Date"),t("th",{class:"px-2 py-3 font-semibold"},"Description"),t("th",{class:"px-2 py-3 font-semibold"},"Type"),t("th",{class:"px-2 py-3 font-semibold"},"Amount"),t("th",{class:"px-2 py-3 font-semibold"},"Balance")])],-1)),Ra={class:"px-2 py-4"},Da={class:"px-2 py-4"},Ia={class:"px-2 py-4"},ja={class:"px-2 py-4"},Na={class:"px-2 py-4"},Ea=s(()=>t("span",null,"1–12 of 12",-1)),La={class:"flex items-center space-x-2"},Ca=s(()=>t("span",null,"Rows per page:",-1)),$a={class:"flex justify-between items-center mb-4"},Ba=s(()=>t("h2",{class:"text-lg font-semibold"},"Filter Transactions",-1)),Va=s(()=>t("i",{class:"fas fa-sign-out-alt"},null,-1)),Ua=[Va],Wa={class:"space-y-4"},Pa=s(()=>t("label",{class:"text-sm font-medium"},"Date",-1)),qa={class:"flex gap-2 mt-1"},Ha=s(()=>t("label",{class:"text-sm font-medium"},"Type",-1)),Ga={class:"flex gap-2"},za={class:"flex justify-end gap-2 mt-4"},Fa={__name:"StatementAnalysis",setup(G){const ot=n("Summary"),z=u=>A(u).format("MMMM Do YYYY,");function W(u){return typeof u!="number"?"0%":`${(u*100).toFixed(2)}%`}function i(u){return new Intl.NumberFormat("en-NG",{style:"currency",currency:"NGN",minimumFractionDigits:2}).format(u||0)}const P=n(15),O=Be(),C=Ve(),F=n(null),r=n(!0),f=n(null),D=n(""),p=n(""),b=n(""),_t=n(""),nt=n(0),K=n(0),J=n(0),q=n(0),$=n(0),kt=n(0),Ot=n(0),_e=n(0),Yt=n(0),St=n(0),fe=n(0),Rt=n(0),ft=n([]),mt=n([]),me=tt(()=>ft.value.reduce((u,a)=>u+a.credit,0)),pe=tt(()=>ft.value.reduce((u,a)=>u+a.debit,0)),he=tt(()=>mt.value.reduce((u,a)=>u+a.credit,0)),ve=tt(()=>mt.value.reduce((u,a)=>u+a.debit,0)),Dt=n(0),It=n(0),jt=n(0),Nt=n(""),Et=n([]),Lt=n(""),Ct=n(""),$t=n(""),Bt=n(""),Vt=n(0),bt=n(""),Ut=n(0),Wt=n(""),ye=n(0),xe=n(0),Pt=n(0),qt=n(0),Ht=n(0),Gt=n(0),zt=n(0),be=n(0),ge=n(0),Ft=n(""),Kt=n([]),Jt=n(""),we=n(""),Me=n(0),Te=n(""),Xt=n(0),Qt=n(0),Zt=n(0),te=n(0),ee=n(0),se=n(0),oe=n(0),pt=n([]),ne=n([]),gt=n([]),wt=n([]),Ae=async u=>{var Y,E,T,L,I,H,X,Q,Z,vt,U,at,lt;const a=JSON.parse(localStorage.getItem("data")||"{}"),N=(a==null?void 0:a.token)||C.token,M=`https://dev02201.getjupita.com/api/${((Y=a==null?void 0:a.user)==null?void 0:Y.tenant_id)||C.tenant_id}/get-analysis-result?analysis_id=${u}`;r.value=!0;try{let le=function(d){return A(d,"M-YYYY").format("MMM YYYY")};const V=await xt.get(M,{headers:{Authorization:`Bearer ${N}`,"Content-Type":"application/json"}});console.log("statement analysis result page data:",V),F.value=V.data;const e=(L=(T=(E=V.data)==null?void 0:E.data)==null?void 0:T.analysis_result)==null?void 0:L.analysis_result;D.value=(e==null?void 0:e.name)||"N/A",p.value=(e==null?void 0:e.clientFullName)||"N/A",_t.value=(e==null?void 0:e.accountId)||"N/A";const _=(e==null?void 0:e.behavioralAnalysis)||{};console.log("behavioural:",_),bt.value=_.accountSweep||"No",Ut.value=_.gamblingRate||0,Wt.value=_.gamblingStatus||"N/A",ye.value=_.loanInflowRate||0,xe.value=_.accountActivity||0,Pt.value=_.totalLoanAmount||0,qt.value=_.loanToInflowRate||0,Ht.value=_.numberLoanTransactions||0,Gt.value=_.averageMonthlyLoanAmount||0,zt.value=_.totalLoanRepaymentAmount||0,be.value=_.loanRepaymentToInflowRate||0,ge.value=_.numberRepaymentTransactions||0,Kt.value=_.latestRepaymentTransaction||[];const yt=Kt.value[0]||null;Jt.value=yt!=null&&yt.date?A(yt.date).format("MMM D, YYYY"):"N/A";const ae=(I=_.latestLoanTransaction)==null?void 0:I[0];Ft.value=ae?A(ae.date).format("MMMM D, YYYY"):"N/A",we.value=_.overallInflowToOutflowRate||"N/A",Me.value=_.percentOfInflowIrregularity||0,Te.value=_.monthToMonthInflowToOutflowRate||"N/A",Xt.value=_.averageMonthlyLoanRepaymentAmount||0;const l=e==null?void 0:e.cashFlowAnalysis;console.log("cash flow data:",l),Dt.value=e==null?void 0:e.spendAnalysis.mostFrequentExpense,It.value=e==null?void 0:e.spendAnalysis.mostFrequentExpenseAmount;const y=((Z=(Q=(X=(H=V.data)==null?void 0:H.data)==null?void 0:X.analysis_result)==null?void 0:Q.analysis_result)==null?void 0:Z.spendAnalysis)||{},S=((lt=(at=(U=(vt=V.data)==null?void 0:vt.data)==null?void 0:U.analysis_result)==null?void 0:at.analysis_result)==null?void 0:lt.transactionPatternAnalysis)||{};console.log("pattern analysis:",S),Lt.value=(S.percentDebitTransactions*100).toFixed(2)+"%",Ct.value=(S.percentCreditTransactions*100).toFixed(2)+"%",$t.value=(S.percentOfTransactionsBetween500ThousandToOneMillionNaira*100).toFixed(2)+"%",Bt.value=(S.percentOfTransactionsGreaterThanOneMillionNaira*100).toFixed(2)+"%",Vt.value=S.mostFrequentBalanceRange,Qt.value=S.noOfSelfTransferInflows,Zt.value=S.noOfSelfTransferOutflows,te.value=S.selfTransferInflowAmount,ee.value=S.selfTransferOutflowAmount,se.value=S.totalNumberOfTransactions,oe.value=S.returnCheque;const Re=S.selfTransferInflowTransactionsByMonth||[],De=S.selfTransferOutflowTransactionsByMonth||[],dt=new Map;Re.forEach(d=>{const h=le(d.date);dt.set(h,{month:h,inflow:d.amount,outflow:0})}),De.forEach(d=>{const h=le(d.date);dt.has(h)?dt.get(h).outflow=d.amount:dt.set(h,{month:h,inflow:0,outflow:d.amount})}),pt.value=Array.from(dt.values()).sort((d,h)=>A(d.month,"MMM YYYY")-A(h.month,"MMM YYYY")),jt.value=y.highestSpend,Nt.value=A(y.monthWithHighestSpend,"M/YYYY").format("MMMM YYYY"),Et.value=[{label:"Others",monthly:y.averageMonthlySpendOnOthers??0,total:12*(y.averageMonthlySpendOnOthers??0)},{label:"Rent",monthly:y.averageMonthlySpendOnRent??0,total:12*(y.averageMonthlySpendOnRent??0)},{label:"Hospitality and Food",monthly:y.averageMonthlySpendOnHospitalityAndFood??0,total:12*(y.averageMonthlySpendOnHospitalityAndFood??0)},{label:"Transportation",monthly:y.averageMonthlySpendOnTransportation??0,total:12*(y.averageMonthlySpendOnTransportation??0)},{label:"Utilities",monthly:y.averageMonthlySpendOnUtilities??0,total:12*(y.averageMonthlySpendOnUtilities??0)},{label:"Charges and Stamp Duty",monthly:y.averageMonthlySpendOnChargesAndStampDuty??0,total:12*(y.averageMonthlySpendOnChargesAndStampDuty??0)},{label:"Transfer",monthly:y.averageMonthlySpendOnTransfer??0,total:12*(y.averageMonthlySpendOnTransfer??0)},{label:"ATM Withdrawals and POS",monthly:y.averageMonthlySpendOnAtmAndPOS??0,total:12*(y.averageMonthlySpendOnAtmAndPOS??0)}],nt.value=(l==null?void 0:l.totalDebitTurnOver)||0,K.value=(l==null?void 0:l.totalCreditTurnover)||0,J.value=(l==null?void 0:l.averageMonthlyDebits)||0,q.value=(l==null?void 0:l.averageMonthlyCredits)||0,$.value=(l==null?void 0:l.averageMonthlyBalance)||0,kt.value=(l==null?void 0:l.averageWeeklyBalance)||0,Ot.value=(l==null?void 0:l.totalCreditTurnover)||0,_e.value=(l==null?void 0:l.averageMonthlyCredits)||0,Yt.value=(l==null?void 0:l.averageWeeklyCredits)||0,St.value=(l==null?void 0:l.totalDebitTurnOver)||0,fe.value=(l==null?void 0:l.averageMonthlyDebits)||0,Rt.value=(l==null?void 0:l.averageWeeklyDebits)||0;const Ie=(l==null?void 0:l.monthlyHighestBalance)||[],je=(l==null?void 0:l.monthlyLowestBalance)||[],it=new Map;Ie.forEach(d=>{const h=`${d.month_name} ${d.year}`,R=A(h,"MMMM YYYY").format("MMM YYYY"),j=`${d.month_name}-${d.year}`;it.set(j,{month:R,highest:d.highest_balance,lowest:0})}),je.forEach(d=>{const h=`${d.month_name} ${d.year}`,R=A(h,"MMMM YYYY").format("MMM YYYY"),j=`${d.month_name}-${d.year}`;it.has(j)?it.get(j).lowest=d.lowest_balance:it.set(j,{month:R,highest:0,lowest:d.lowest_balance})}),ne.value=Array.from(it.values());const Ne=(l==null?void 0:l.monthlyInflow)||[],Ee=(l==null?void 0:l.monthlyOutflow)||[],ct=new Map;Ne.forEach(d=>{const h=`${d.month_name} ${d.year}`,R=A(h,"MMMM YYYY").format("MMM YYYY"),j=`${d.month_name}-${d.year}`;ct.set(j,{month:R,credit:d.amount,debit:0})}),Ee.forEach(d=>{const h=`${d.month_name} ${d.year}`,R=A(h,"MMMM YYYY").format("MMM YYYY"),j=`${d.month_name}-${d.year}`;ct.has(j)?ct.get(j).debit=d.amount:ct.set(j,{month:R,credit:0,debit:d.amount})}),ft.value=Array.from(ct.values());const Le=(l==null?void 0:l.weeklyInflow)||[],Ce=(l==null?void 0:l.weeklyOutflow)||[],rt=new Map;Le.forEach(d=>{const h=A().month(d.month_name).format("MMM"),R=`${d.year}-${h}-W${d.week}`;rt.set(R,{week:`${h} ${d.year} | ${d.week}`,credit:d.amount,debit:0})}),Ce.forEach(d=>{const h=A().month(d.month_name).format("MMM"),R=`${d.year}-${h}-W${d.week}`;rt.has(R)?rt.get(R).debit=d.amount:rt.set(R,{week:`${h} ${d.year} ${d.week}`,credit:0,debit:d.amount})}),mt.value=Array.from(rt.values());const de=new Date(e==null?void 0:e.startDate),ie=new Date(e==null?void 0:e.endDate);!isNaN(de)&&!isNaN(ie)?b.value=`${A(de).format("MMMM D, YYYY")} - ${A(ie).format("MMMM D, YYYY")}`:b.value="Unknown period"}catch(V){console.error("Error fetching analysis result:",V),f.value="Unable to fetch analysis result."}finally{r.value=!1}},ke=async u=>{var E;const a=JSON.parse(localStorage.getItem("data")||"{}"),N=(a==null?void 0:a.token)||C.token,B=((E=a==null?void 0:a.user)==null?void 0:E.tenant_id)||C.tenant_id,M=O.params.id,Y=`https://dev02201.getjupita.com/api/${B}/get-statement-transactions?analysis_id=${M}`;try{const T=await xt.get(Y,{headers:{Authorization:`Bearer ${N}`}});console.log("fetch transactions response:",T),wt.value=T.data.data.transactions,gt.value=[...wt.value]}catch(T){console.error(T)}},Mt=n(!1),Tt=n(!1),v=Ue({dateRange:[null,null]});tt(()=>z(v.dateRange[0])),tt(()=>z(v.dateRange[1]));const ht=n(!1),Oe=()=>{v.value={dateFrom:"",dateTo:"",description:"",type:"All",amountMin:"",amountMax:""}},Ye=()=>{gt.value=wt.value.filter(u=>{const a=!v.description||u.description.toLowerCase().includes(v.description.toLowerCase()),N=new Date(u.date),B=v.dateRange[0]?new Date(v.dateRange[0]):null,M=v.dateRange[1]?new Date(v.dateRange[1]):null,Y=(!B||N>=B)&&(!M||N<=M);return a&&Y}),ht.value=!1};We(()=>{const u=O.params.id;u?(Ae(u),ke()):(f.value="Invalid analysis ID.",r.value=!1)});const Se=async()=>{var Y,E,T;const u=JSON.parse(localStorage.getItem("data")||"{}"),a=(u==null?void 0:u.token)||C.token,N=((Y=u==null?void 0:u.user)==null?void 0:Y.tenant_id)||C.tenant_id,B=O.params.id,M=`https://dev02201.getjupita.com/api/${N}/download-insight-report?analysis_id=${B}`;try{At({title:"Downloading",message:"Getting your analysis report...",type:"info",duration:3e3});const L=await xt.get(M,{headers:{Authorization:`Bearer ${a}`}}),I=(T=(E=L==null?void 0:L.data)==null?void 0:E.data)==null?void 0:T.download;if(!(I!=null&&I.document_url)||!(I!=null&&I.document_name))throw new Error("No download information or document URL found in the response.");const H=I.document_url,Q="analysis_report.pdf",Z=await xt.get(H,{responseType:"blob"});Fe.saveAs(Z.data,Q),At({title:"Success",message:"Analysis report downloaded successfully.",type:"success",duration:6e3})}catch(L){console.error("Download failed:",L),At({title:"Error",message:"Failed to download analysis. Please try again.",type:"error",duration:6e3})}};return(u,a)=>{const N=g("v-progress-circular"),B=g("RouterLink"),M=g("v-btn"),Y=g("v-tab"),E=g("v-tabs"),T=g("v-tabs-window-item"),L=g("v-card-title"),I=g("v-table"),H=g("v-select"),X=g("v-icon"),Q=g("v-card-actions"),Z=g("v-card"),vt=g("v-tabs-window"),U=g("v-text-field"),at=g("v-date-picker"),lt=g("v-menu"),V=g("v-navigation-drawer");return w(),Pe(qe,null,{default:m(()=>[t("div",Ke,[r.value?(w(),k("div",Je,[c(N,{size:100,width:10,color:"primary",indeterminate:""})])):(w(),k("div",Xe,[c(B,{to:"/dashboard"},{default:m(()=>[t("button",{onClick:a[0]||(a[0]=(...e)=>u.goBack&&u.goBack(...e)),class:"mb-2 flex items-center text-black font-semibold"},[Qe,x(" Back ")])]),_:1}),t("div",Ze,[ts,t("div",es,[c(M,{onClick:Se,"no-uppercase":"",size:"small",class:"normal-case p-4 bg-blue-600 hover:bg-blue-700 text-white text-none mr-2 custom-btn"},{default:m(()=>[ss,x(" Download Analysis ")]),_:1})])]),t("div",os,[t("p",null,[ns,as,x(),ls,t("span",ds,o(b.value),1)]),t("p",null,[is,cs,x(),rs,x(" "+o(p.value),1)]),t("p",null,[us,_s,x(),fs,x(" "+o(_t.value),1)])]),t("div",ms,[c(E,{"align-tabs":"center",class:"mb-6",modelValue:ot.value,"onUpdate:modelValue":a[1]||(a[1]=e=>ot.value=e),color:"primary"},{default:m(()=>[c(Y,{value:"summary"},{default:m(()=>[x("Summary")]),_:1}),c(Y,{value:"cash flow"},{default:m(()=>[x("Cash Flow")]),_:1}),c(Y,{value:"behavioral"},{default:m(()=>[x("Behavioral")]),_:1}),c(Y,{value:"transactions"},{default:m(()=>[x("Transactions")]),_:1})]),_:1},8,["modelValue"]),c(vt,{modelValue:ot.value,"onUpdate:modelValue":a[3]||(a[3]=e=>ot.value=e)},{default:m(()=>[c(T,{value:"summary"},{default:m(()=>[t("div",ps,[t("div",hs,[t("div",vs,o(i(K.value)),1),ys]),t("div",xs,[t("div",bs,o(i(nt.value)),1),gs]),t("div",ws,[t("div",Ms,o(i(q.value)),1),Ts]),t("div",As,[t("div",ks,o(i(J.value)),1),Os]),t("div",Ys,[t("div",Ss,o(i($.value)),1),Rs])]),t("div",Ds,[t("div",Is,[js,t("p",Ns,[x(o(Dt.value),1),Es])]),t("div",Ls,[Cs,t("p",$s,o(i(jt.value)),1),t("p",Bs," Transaction Date: "+o(Nt.value),1)]),t("div",Vs,[Us,t("p",Ws,o(i(It.value)),1)])]),t("div",Ps,[qs,t("table",Hs,[Gs,t("tbody",null,[(w(!0),k(et,null,st(Et.value,(e,_)=>(w(),k("tr",{key:_,class:"text-sm text-gray-700 border-b border-gray-100 hover:bg-gray-50"},[t("td",zs,o(e.label),1),t("td",Fs,o(i(e.monthly)),1),t("td",Ks,o(i(e.total)),1)]))),128))])])])]),_:1}),c(T,{value:"cash flow"},{default:m(()=>[t("div",Js,[t("div",Xs,[Qs,t("div",Zs,[t("div",to,[eo,t("span",so,o(i(Ot.value)),1)]),t("div",oo,[no,t("span",ao,o(i(q.value)),1)]),t("div",lo,[io,t("span",co,o(i(Yt.value)),1)])])]),t("div",ro,[uo,t("div",_o,[t("div",fo,[mo,t("span",po,o(i(St.value)),1)]),t("div",ho,[vo,t("span",yo,o(i(J.value)),1)]),t("div",xo,[bo,t("span",go,o(i(Rt.value)),1)])])])]),t("div",wo,[t("div",Mo,[t("div",To,[x(o(i($.value))+" ",1),Ao]),t("div",ko,[x(o(i(kt.value))+" ",1),Oo])]),Yo]),t("div",So,[Ro,t("div",Do,[t("div",Io,[jo,t("div",No,[t("table",Eo,[Lo,t("tbody",null,[(w(!0),k(et,null,st(ft.value,(e,_)=>(w(),k("tr",{key:_,class:"border-b"},[t("td",Co,o(e.month),1),t("td",$o,o(i(e.credit)),1),t("td",Bo,o(i(e.debit)),1)]))),128))]),t("tfoot",Vo,[t("tr",null,[Uo,t("td",Wo,o(i(me.value)),1),t("td",Po,o(i(pe.value)),1)])])])])]),t("div",qo,[Ho,t("div",Go,[t("table",zo,[Fo,t("tbody",null,[(w(!0),k(et,null,st(mt.value,(e,_)=>(w(),k("tr",{key:_,class:"border-b"},[t("td",Ko,o(e.week),1),t("td",Jo,o(i(e.credit)),1),t("td",Xo,o(i(e.debit)),1)]))),128))]),t("tfoot",Qo,[t("tr",null,[Zo,t("td",tn,o(i(he.value)),1),t("td",en,o(i(ve.value)),1)])])])])])])])]),_:1}),c(T,{value:"behavioral"},{default:m(()=>[t("div",sn,[t("div",on,[nn,t("div",an,[t("div",ln,[dn,t("span",null,o(Ht.value),1)]),t("div",cn,[rn,t("span",null,o(i(Pt.value)),1)]),t("div",un,[_n,t("span",null,o(i(Gt.value)),1)]),t("div",fn,[mn,t("span",null,o(i(zt.value)),1)]),t("div",pn,[hn,t("span",null,o(i(Xt.value)),1)]),t("div",vn,[yn,t("span",null,o(W(qt.value)),1)]),t("div",xn,[bn,t("span",null,o(Ft.value),1)]),t("div",gn,[wn,t("span",null,o(Jt.value),1)])])]),t("div",Mn,[Tn,t("div",An,[t("div",kn,[On,t("span",{class:ce(["font-semibold",bt.value==="YES"?"text-green-600":"text-gray-600"])},o(bt.value),3)]),t("div",Yn,[Sn,t("span",null,o(Wt.value),1)]),t("div",Rn,[Dn,t("span",null,o(Ut.value),1)]),t("div",In,[jn,t("span",null,o(Lt.value),1)]),t("div",Nn,[En,t("span",null,o(Ct.value),1)]),t("div",Ln,[Cn,t("span",null,o($t.value),1)]),t("div",$n,[Bn,t("span",null,o(Bt.value),1)]),t("div",Vn,[Un,t("span",null,o(Vt.value),1)])])])]),t("div",Wn,[t("div",Pn,[t("div",qn,[Hn,Gn,zn,Fn,t("div",Kn,o(Zt.value),1),t("div",Jn,o(Qt.value),1),Xn,t("div",Qn,o(i(ee.value)),1),t("div",Zn,o(i(te.value)),1)])]),t("div",ta,[t("div",ea,[t("div",null,[t("div",sa,o(se.value),1),oa]),t("div",null,[t("div",na,o(oe.value),1),aa])])])]),t("div",la,[t("div",da,[ia,t("div",ca,[t("table",ra,[ua,t("tbody",null,[!pt.value||pt.value.length===0?(w(),k("tr",_a,ma)):He("",!0),(w(!0),k(et,null,st(pt.value,(e,_)=>(w(),k("tr",{key:_,class:"border-b last:border-none"},[t("td",pa,o(e.month),1),t("td",ha,o(i(e.inflow)),1),t("td",va,o(i(e.outflow)),1)]))),128))])])])]),t("div",ya,[xa,t("div",ba,[t("table",ga,[wa,t("tbody",null,[(w(!0),k(et,null,st(ne.value,(e,_)=>(w(),k("tr",{key:_},[t("td",Ma,o(e.month),1),t("td",Ta,o(i(e.highest)),1),t("td",Aa,o(i(e.lowest)),1)]))),128))])])])])])]),_:1}),c(T,{value:"transactions"},{default:m(()=>[t("div",ka,[c(Z,{class:"rounded-lg shadow-md"},{default:m(()=>[c(L,{class:"d-flex justify-between items-center px-6 py-4"},{default:m(()=>[Oa,c(M,{icon:"",variant:"text"},{default:m(()=>[Ya]),_:1})]),_:1}),c(I,{class:"min-w-full text-sm pa-4"},{default:m(()=>[Sa,t("tbody",null,[(w(!0),k(et,null,st(gt.value,(e,_)=>(w(),k("tr",{key:_,class:"border-t border-gray-200 hover:bg-gray-50 transition-colors"},[t("td",Ra,o(_+1),1),t("td",Da,o(z(e.date)),1),t("td",Ia,o(e.description),1),t("td",{class:ce(["px-6 py-4 font-semibold",e.type==="CREDIT"?"text-green-600":"text-red-600"])},o(e.type),3),t("td",ja,o(i(e.amount)),1),t("td",Na,o(i(e.balance)),1)]))),128))])]),_:1}),c(Q,{class:"justify-between px-6 py-4 text-sm text-gray-500"},{default:m(()=>[Ea,t("div",La,[Ca,c(H,{items:[15,30,45],modelValue:P.value,"onUpdate:modelValue":a[2]||(a[2]=e=>P.value=e),density:"compact","hide-details":"",class:"w-20",variant:"outlined"},null,8,["modelValue"]),c(M,{icon:"",density:"comfortable"},{default:m(()=>[c(X,null,{default:m(()=>[x("mdi-chevron-left")]),_:1})]),_:1}),c(M,{icon:"",density:"comfortable"},{default:m(()=>[c(X,null,{default:m(()=>[x("mdi-chevron-right")]),_:1})]),_:1})])]),_:1})]),_:1})])]),_:1})]),_:1},8,["modelValue"])]),c(V,{modelValue:ht.value,"onUpdate:modelValue":a[15]||(a[15]=e=>ht.value=e),location:"right",temporary:"",width:"500",class:"px-4 pt-6"},{default:m(()=>[t("div",$a,[Ba,t("div",{icon:"",onClick:a[4]||(a[4]=e=>ht.value=!1)},Ua)]),t("div",Wa,[t("div",null,[Pa,t("div",qa,[c(lt,{modelValue:Mt.value,"onUpdate:modelValue":a[7]||(a[7]=e=>Mt.value=e),"close-on-content-click":!1,transition:"scale-transition","offset-y":""},{activator:m(({props:e})=>[c(U,re({label:"From",readonly:""},e,{density:"compact",variant:"outlined","prepend-inner-icon":"mdi-calendar"}),null,16)]),default:m(()=>[c(at,{class:"vdp-small",modelValue:v.dateRange[0],"onUpdate:modelValue":[a[5]||(a[5]=e=>v.dateRange[0]=e),a[6]||(a[6]=e=>Mt.value=!1)]},null,8,["modelValue"])]),_:1},8,["modelValue"]),c(lt,{modelValue:Tt.value,"onUpdate:modelValue":a[10]||(a[10]=e=>Tt.value=e),"close-on-content-click":!1,transition:"scale-transition","offset-y":""},{activator:m(({props:e})=>[c(U,re({label:"To",readonly:""},e,{density:"compact",variant:"outlined","prepend-inner-icon":"mdi-calendar"}),null,16)]),default:m(()=>[c(at,{modelValue:v.dateRange[1],"onUpdate:modelValue":[a[8]||(a[8]=e=>v.dateRange[1]=e),a[9]||(a[9]=e=>Tt.value=!1)]},null,8,["modelValue"])]),_:1},8,["modelValue"])])]),t("div",null,[c(U,{color:"blue",label:"Description",modelValue:v.description,"onUpdate:modelValue":a[11]||(a[11]=e=>v.description=e),density:"compact",variant:"outlined",placeholder:"Enter description"},null,8,["modelValue"])]),t("div",null,[Ha,c(H,{color:"blue",modelValue:v.type,"onUpdate:modelValue":a[12]||(a[12]=e=>v.type=e),items:["CREDIT","DEBIT"],density:"compact",variant:"outlined",placeholder:"Select type"},null,8,["modelValue"])]),t("div",Ga,[c(U,{color:"blue",modelValue:v.minAmount,"onUpdate:modelValue":a[13]||(a[13]=e=>v.minAmount=e),label:"Min Amount",density:"compact",variant:"outlined",type:"number"},null,8,["modelValue"]),c(U,{color:"blue",modelValue:v.maxAmount,"onUpdate:modelValue":a[14]||(a[14]=e=>v.maxAmount=e),label:"Max Amount",density:"compact",variant:"outlined",type:"number"},null,8,["modelValue"])]),t("div",za,[c(M,{onClick:Ye,variant:"tonal",color:"primary"},{default:m(()=>[x("Apply")]),_:1}),c(M,{onClick:Oe,variant:"text",color:"grey"},{default:m(()=>[x("Reset")]),_:1})])])]),_:1},8,["modelValue"])]))])]),_:1})}}},Ja=$e(Fa,[["__scopeId","data-v-9e3751ff"]]);export{Ja as default};
