import{_ as O,r as n,u as P,b as E,o as J,e as h,f as L,g as q,w as l,M as H,h as K,i as U,j as t,k as c,t as u,l as r,p as Q,m as W}from"./index-DAbsB6I-.js";const e=p=>(Q("data-v-3b7e0474"),p=p(),W(),p),X={class:"p-2"},Z=e(()=>t("h2",{class:"text-xl font-bold m-8"},"Statement Analysis Result",-1)),F={class:"p-2 md:p-8"},tt=e(()=>t("i",{class:"fas fa-arrow-left mr-2"},null,-1)),et={class:"grid grid-cols-1 md:grid-cols-3 gap-6 text-gray-700 mt-4"},st=e(()=>t("i",{class:"fas fa-calendar mr-2"},null,-1)),at=e(()=>t("strong",null,"Statement Period:",-1)),ot=e(()=>t("br",null,null,-1)),nt=e(()=>t("i",{class:"fas fa-user-circle mr-2"},null,-1)),lt=e(()=>t("strong",null,"Account Name:",-1)),ct=e(()=>t("br",null,null,-1)),rt=e(()=>t("i",{class:"fas fa-id-card mr-2"},null,-1)),it=e(()=>t("strong",null,"Account Number:",-1)),dt=e(()=>t("br",null,null,-1)),ut={class:"text-right mt-4"},_t=e(()=>t("i",{class:"fas fa-download mr-2"},null,-1)),mt={class:"mt-6"},vt={class:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-4 px-4"},ft={class:"bg-blue-50 text-center shadow rounded-2xl p-4 flex flex-col items-center justify-center"},ht={class:"text-md font-semibold"},pt=e(()=>t("div",{class:"text-sm text-gray-500 mt-1"},"Total Credit",-1)),gt={class:"bg-red-50 text-center shadow rounded-2xl p-4 flex flex-col items-center justify-center"},xt={class:"text-md font-semibold"},bt=e(()=>t("div",{class:"text-sm text-gray-500 mt-1"},"Total Debits",-1)),yt={class:"bg-green-50 text-center shadow rounded-2xl p-4 flex flex-col items-center justify-center"},wt={class:"text-md font-semibold"},Mt=e(()=>t("div",{class:"text-sm text-gray-500 mt-1"},"Avg. Monthly Credit",-1)),Nt={class:"bg-purple-50 text-center shadow rounded-2xl p-4 flex flex-col items-center justify-center"},Ct={class:"text-md font-semibold"},Dt=e(()=>t("div",{class:"text-sm text-gray-500 mt-1"},"Avg. Monthly Debits",-1)),St={class:"bg-gray-100 text-center shadow rounded-2xl p-4 flex flex-col items-center justify-center"},At={class:"text-md font-semibold"},kt=e(()=>t("div",{class:"text-sm text-gray-500 mt-1"},"Average Monthly Balance",-1)),Bt=e(()=>t("div",{class:"text-center text-gray-500 py-10"},"Cash Flow Content",-1)),It=e(()=>t("div",{class:"text-center text-gray-500 py-10"},"Behavioral Content",-1)),Tt=e(()=>t("div",{class:"text-center text-gray-500 py-10"},"Transactions Content",-1)),Vt={__name:"StatementAnalysis",setup(p){const g=n("Summary");function m(i){return new Intl.NumberFormat("en-NG",{style:"currency",currency:"NGN",minimumFractionDigits:2}).format(i||0)}const $=P(),M=E(),R=n(null),N=n(!0),C=n(null),z=n(""),D=n(""),b=n(""),S=n(""),A=n(0),k=n(0),B=n(0),I=n(0),T=n(0),G=async i=>{var _,x,d,V;const o=JSON.parse(localStorage.getItem("data")||"{}"),y=(o==null?void 0:o.token)||M.token,w=`https://dev02201.getjupita.com/api/${((_=o==null?void 0:o.user)==null?void 0:_.tenant_id)||M.tenant_id}/get-analysis-result?analysis_id=${i}`;try{const f=await K.get(w,{headers:{Authorization:`Bearer ${y}`,"Content-Type":"application/json"}});console.log("statement analysis result page data:",f),R.value=f.data;const s=(V=(d=(x=f.data)==null?void 0:x.data)==null?void 0:d.analysis_result)==null?void 0:V.analysis_result;z.value=(s==null?void 0:s.name)||"N/A",D.value=(s==null?void 0:s.clientFullName)||"N/A",S.value=(s==null?void 0:s.accountId)||"N/A";const a=s==null?void 0:s.cashFlowAnalysis;A.value=(a==null?void 0:a.totalDebitTurnOver)||0,k.value=(a==null?void 0:a.totalCreditTurnover)||0,B.value=(a==null?void 0:a.averageMonthlyDebits)||0,I.value=(a==null?void 0:a.averageMonthlyCredits)||0,T.value=(a==null?void 0:a.averageMonthlyBalance)||0;const j=new Date(s==null?void 0:s.createdDate),Y=new Date(s==null?void 0:s.endDate);!isNaN(j)&&!isNaN(Y)?b.value=`${U(j).format("MMMM D, YYYY")} - ${U(Y).format("MMMM D, YYYY")}`:b.value="Unknown period"}catch(f){console.error("Error fetching analysis result:",f),C.value="Unable to fetch analysis result."}finally{N.value=!1}};return J(()=>{const i=$.params.id;i?G(i):(C.value="Invalid analysis ID.",N.value=!1)}),(i,o)=>{const y=h("v-btn"),v=h("v-tab"),w=h("v-tabs"),_=h("v-tabs-window-item"),x=h("v-tabs-window");return L(),q(H,null,{default:l(()=>[t("div",X,[Z,t("div",F,[t("button",{onClick:o[0]||(o[0]=(...d)=>i.goBack&&i.goBack(...d)),class:"flex items-center text-blue-600 font-semibold"},[tt,c(" Back ")]),t("div",et,[t("p",null,[st,at,c(),ot,c(" "+u(b.value),1)]),t("p",null,[nt,lt,c(),ct,c(" "+u(D.value),1)]),t("p",null,[rt,it,c(),dt,c(" "+u(S.value),1)]),t("div",ut,[r(y,{"no-uppercase":"",size:"large",class:"normal-case p-4 bg-blue-600 hover:bg-blue-700 text-white text-none mr-2 custom-btn"},{default:l(()=>[_t,c(" Download Analysis ")]),_:1})])]),t("div",mt,[r(w,{"align-tabs":"center",class:"mb-4",modelValue:g.value,"onUpdate:modelValue":o[1]||(o[1]=d=>g.value=d),color:"primary"},{default:l(()=>[r(v,{value:"summary"},{default:l(()=>[c("Summary")]),_:1}),r(v,{value:"cash flow"},{default:l(()=>[c("Cash Flow")]),_:1}),r(v,{value:"behavioral"},{default:l(()=>[c("Behavioral")]),_:1}),r(v,{value:"transactions"},{default:l(()=>[c("Transactions")]),_:1})]),_:1},8,["modelValue"]),r(x,{modelValue:g.value,"onUpdate:modelValue":o[2]||(o[2]=d=>g.value=d)},{default:l(()=>[r(_,{value:"summary"},{default:l(()=>[t("div",vt,[t("div",ft,[t("div",ht,u(m(k.value)),1),pt]),t("div",gt,[t("div",xt,u(m(A.value)),1),bt]),t("div",yt,[t("div",wt,u(m(I.value)),1),Mt]),t("div",Nt,[t("div",Ct,u(m(B.value)),1),Dt]),t("div",St,[t("div",At,u(m(T.value)),1),kt])])]),_:1}),r(_,{value:"cash flow"},{default:l(()=>[Bt]),_:1}),r(_,{value:"behavioral"},{default:l(()=>[It]),_:1}),r(_,{value:"transactions"},{default:l(()=>[Tt]),_:1})]),_:1},8,["modelValue"])])])])]),_:1})}}},Yt=O(Vt,[["__scopeId","data-v-3b7e0474"]]);export{Yt as default};
