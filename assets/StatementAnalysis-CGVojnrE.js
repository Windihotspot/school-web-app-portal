import{_ as ht,r as a,u as mt,b as vt,o as pt,e as b,f as p,g as yt,w as _,M as ft,h as ot,i as at,j as t,k as x,l as h,m as u,t as o,F as W,n as E,p as xt,q as gt}from"./index-CVA79P-u.js";const s=S=>(xt("data-v-f80135e8"),S=S(),gt(),S),bt={class:"p-2"},wt=s(()=>t("h2",{class:"text-xl font-bold mt-2 ml-6"},"Statement Analysis Result",-1)),Mt={key:0,class:"flex items-center justify-center h-96"},kt={key:1,class:"p-2 md:p-8"},St={class:"flex justify-between"},Ot=s(()=>t("i",{class:"fas fa-arrow-left mr-2"},null,-1)),At={class:"text-right"},Dt=s(()=>t("i",{class:"fas fa-download mr-2"},null,-1)),Ct={class:"grid grid-cols-1 md:grid-cols-3 gap-6 text-gray-700 mt-4"},It=s(()=>t("i",{class:"fas fa-calendar mr-2"},null,-1)),Tt=s(()=>t("strong",null,"Statement Period:",-1)),Nt=s(()=>t("br",null,null,-1)),jt=s(()=>t("i",{class:"fas fa-user-circle mr-2"},null,-1)),Bt=s(()=>t("strong",null,"Account Name:",-1)),Wt=s(()=>t("br",null,null,-1)),Et=s(()=>t("i",{class:"fas fa-id-card mr-2"},null,-1)),$t=s(()=>t("strong",null,"Account Number:",-1)),Rt=s(()=>t("br",null,null,-1)),Ut={class:"mt-6"},Vt={class:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-4 px-4"},Yt={class:"bg-blue-50 text-center shadow rounded-2xl p-4 flex flex-col items-center justify-center"},qt={class:"text-md font-semibold"},Pt=s(()=>t("div",{class:"text-sm text-gray-500 mt-1"},"Total Credit",-1)),zt={class:"bg-red-50 text-center shadow rounded-2xl p-4 flex flex-col items-center justify-center"},Ht={class:"text-md font-semibold"},Lt=s(()=>t("div",{class:"text-sm text-gray-500 mt-1"},"Total Debits",-1)),Gt={class:"bg-green-50 text-center shadow rounded-2xl p-4 flex flex-col items-center justify-center"},Jt={class:"text-md font-semibold"},Kt=s(()=>t("div",{class:"text-sm text-gray-500 mt-1"},"Avg. Monthly Credit",-1)),Qt={class:"bg-purple-50 text-center shadow rounded-2xl p-4 flex flex-col items-center justify-center"},Xt={class:"text-md font-semibold"},Zt=s(()=>t("div",{class:"text-sm text-gray-500 mt-1"},"Avg. Monthly Debits",-1)),Ft={class:"bg-gray-100 text-center shadow rounded-2xl p-4 flex flex-col items-center justify-center"},te={class:"text-md font-semibold"},ee=s(()=>t("div",{class:"text-sm text-gray-500 mt-1"},"Average Monthly Balance",-1)),se={class:"flex flex-col md:flex-row gap-4 p-4"},oe={class:"bg-white rounded-2xl shadow-md p-4 w-full md:w-1/3"},ae=s(()=>t("p",{class:"text-sm text-gray-500 mb-1"},"Most Frequent Expense",-1)),le={class:"font-semibold text-gray-800 leading-tight"},ne=s(()=>t("br",null,null,-1)),de={class:"bg-white rounded-2xl shadow-md p-4 w-full md:w-1/3"},ie=s(()=>t("p",{class:"text-sm text-gray-500 mb-1"},"Highest Spend",-1)),ce={class:"font-semibold text-gray-800 text-lg"},re={class:"text-sm font-semibold text-gray-600 mt-1"},ue={class:"bg-white rounded-2xl shadow-md p-4 w-full md:w-1/3"},_e=s(()=>t("p",{class:"text-sm text-gray-500 mb-1"},"Most Frequent Expense Amount",-1)),he={class:"font-semibold text-gray-800 text-lg"},me={class:"bg-white p-6 rounded-2xl shadow-md overflow-x-auto"},ve=s(()=>t("h2",{class:"text-lg font-semibold text-gray-800 mb-4"},"Expenses",-1)),pe={class:"min-w-full table-auto border-collapse"},ye=s(()=>t("thead",null,[t("tr",{class:"text-left text-sm font-semibold text-gray-600 border-b border-gray-200"},[t("th",{class:"py-3 px-4"},"Expenses"),t("th",{class:"py-3 px-4"},"Average Monthly Expenditure"),t("th",{class:"py-3 px-4"},"Total Expenditure")])],-1)),fe={class:"py-3 px-4"},xe={class:"py-3 px-4"},ge={class:"py-3 px-4"},be={class:"flex flex-col md:flex-row gap-4 text-center text-gray-500 py-10"},we={class:"flex-1 bg-white p-6 rounded-xl shadow"},Me=s(()=>t("h2",{class:"text-lg font-semibold text-blue-800 mb-4"},"Inflow Summary",-1)),ke={class:"space-y-2"},Se={class:"flex justify-between"},Oe=s(()=>t("span",null,"Total Inflow",-1)),Ae={class:"text-green-600 font-bold"},De={class:"flex justify-between"},Ce=s(()=>t("span",null,"Average Monthly Inflow",-1)),Ie={class:"font-medium"},Te={class:"flex justify-between"},Ne=s(()=>t("span",null,"Average Weekly Inflow",-1)),je={class:"font-medium"},Be={class:"flex-1 bg-white p-6 rounded-xl shadow"},We=s(()=>t("h2",{class:"text-lg font-semibold text-blue-800 mb-4"},"Outflow Summary",-1)),Ee={class:"space-y-2"},$e={class:"flex justify-between"},Re=s(()=>t("span",null,"Total Outflow",-1)),Ue={class:"text-red-600 font-bold"},Ve={class:"flex justify-between"},Ye=s(()=>t("span",null,"Average Monthly Outflow",-1)),qe={class:"font-medium"},Pe={class:"flex justify-between"},ze=s(()=>t("span",null,"Average Weekly Outflow",-1)),He={class:"font-medium"},Le={class:"flex gap-4 justify-between bg-[#f0f8ff] p-6"},Ge={class:"flex justify-between bg-[#1f4e99] text-white rounded-2xl p-6 w-full"},Je={class:"flex-1 text-xl font-semibold"},Ke=s(()=>t("div",{class:"text-sm mt-2"},"Average Monthly Balance",-1)),Qe={class:"flex-1 text-xl font-semibold"},Xe=s(()=>t("div",{class:"text-sm mt-2"},"Average Weekly Balance",-1)),Ze=s(()=>t("div",{class:"flex justify-between bg-[#1f4e99] text-white rounded-2xl p-6 w-full"},[t("div",{class:"flex-1"},[t("div",{class:"text-xl font-semibold"},"Negative Cash Flow"),t("div",{class:"text-sm mt-2"},"Inflow to Outflow Rate")]),t("div",{class:"flex-1"},[t("div",{class:"text-xl font-semibold"},"Negative Cash Flow"),t("div",{class:"text-sm mt-2"},"Overall Inflow to Outflow")])],-1)),Fe={class:"bg-gray-50 p-6 rounded-lg shadow-md"},ts=s(()=>t("h2",{class:"text-xl font-semibold text-gray-800 mb-4"},"Credit & Debit Summary",-1)),es={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},ss={class:"bg-white p-4 rounded-lg shadow"},os=s(()=>t("h3",{class:"text-lg font-bold text-gray-700 mb-3"},"Monthly Credit & Debit",-1)),as={class:"overflow-y-auto max-h-96"},ls={class:"min-w-full table-auto text-sm text-left text-gray-600"},ns=s(()=>t("thead",{class:"bg-gray-100 font-medium text-gray-700"},[t("tr",null,[t("th",{class:"px-4 py-2"},"Month"),t("th",{class:"px-4 py-2"},"Total Credit"),t("th",{class:"px-4 py-2"},"Total Debit")])],-1)),ds={class:"px-4 py-2"},is={class:"px-4 py-2"},cs={class:"px-4 py-2"},rs={class:"bg-white p-4 rounded-lg shadow"},us=s(()=>t("h3",{class:"text-lg font-bold text-gray-700 mb-3"},"Weekly Credit & Debit",-1)),_s={class:"overflow-y-auto max-h-96"},hs={class:"min-w-full table-auto text-sm text-left text-gray-600"},ms=s(()=>t("thead",{class:"bg-gray-100 font-medium text-gray-700"},[t("tr",null,[t("th",{class:"px-4 py-2"},"Week"),t("th",{class:"px-4 py-2"},"Total Credit"),t("th",{class:"px-4 py-2"},"Total Debit")])],-1)),vs={class:"px-4 py-2"},ps={class:"px-4 py-2"},ys={class:"px-4 py-2"},fs=s(()=>t("div",{class:"text-center text-gray-500 py-10"},"Behavioral Content",-1)),xs=s(()=>t("div",{class:"text-center text-gray-500 py-10"},"Transactions Content",-1)),gs={__name:"StatementAnalysis",setup(S){const O=a("Summary");function n(i){return new Intl.NumberFormat("en-NG",{style:"currency",currency:"NGN",minimumFractionDigits:2}).format(i||0)}const $=mt(),A=vt(),lt=a(null),D=a(!0),R=a(null),nt=a(""),U=a(""),T=a(""),V=a(""),Y=a(0),q=a(0),N=a(0),j=a(0),B=a(0),P=a(0),z=a(0),dt=a(0),H=a(0),L=a(0),it=a(0),G=a(0),J=a([]),K=a([]),Q=a(0),X=a(0),Z=a([]),ct=async i=>{var m,y,g,I,d,f,F,tt;const r=JSON.parse(localStorage.getItem("data")||"{}"),M=(r==null?void 0:r.token)||A.token,k=`https://dev02201.getjupita.com/api/${((m=r==null?void 0:r.user)==null?void 0:m.tenant_id)||A.tenant_id}/get-analysis-result?analysis_id=${i}`;D.value=!0;try{const w=await ot.get(k,{headers:{Authorization:`Bearer ${M}`,"Content-Type":"application/json"}});console.log("statement analysis result page data:",w),lt.value=w.data;const l=(I=(g=(y=w.data)==null?void 0:y.data)==null?void 0:g.analysis_result)==null?void 0:I.analysis_result;nt.value=(l==null?void 0:l.name)||"N/A",U.value=(l==null?void 0:l.clientFullName)||"N/A",V.value=(l==null?void 0:l.accountId)||"N/A";const e=l==null?void 0:l.cashFlowAnalysis;Q.value=l==null?void 0:l.spendAnalysis.mostFrequentExpense,X.value=l==null?void 0:l.spendAnalysis.mostFrequentExpenseAmount;const c=((tt=(F=(f=(d=w.data)==null?void 0:d.data)==null?void 0:f.analysis_result)==null?void 0:F.analysis_result)==null?void 0:tt.spendAnalysis)||{};Z.value=[{label:"Others",monthly:c.averageMonthlySpendOnOthers??0,total:12*(c.averageMonthlySpendOnOthers??0)},{label:"Rent",monthly:c.averageMonthlySpendOnRent??0,total:12*(c.averageMonthlySpendOnRent??0)},{label:"Hospitality and Food",monthly:c.averageMonthlySpendOnHospitalityAndFood??0,total:12*(c.averageMonthlySpendOnHospitalityAndFood??0)},{label:"Transportation",monthly:c.averageMonthlySpendOnTransportation??0,total:12*(c.averageMonthlySpendOnTransportation??0)},{label:"Utilities",monthly:c.averageMonthlySpendOnUtilities??0,total:12*(c.averageMonthlySpendOnUtilities??0)},{label:"Charges and Stamp Duty",monthly:c.averageMonthlySpendOnChargesAndStampDuty??0,total:12*(c.averageMonthlySpendOnChargesAndStampDuty??0)},{label:"Transfer",monthly:c.averageMonthlySpendOnTransfer??0,total:12*(c.averageMonthlySpendOnTransfer??0)},{label:"ATM Withdrawals and POS",monthly:c.averageMonthlySpendOnAtmAndPOS??0,total:12*(c.averageMonthlySpendOnAtmAndPOS??0)}],Y.value=(e==null?void 0:e.totalDebitTurnOver)||0,q.value=(e==null?void 0:e.totalCreditTurnover)||0,N.value=(e==null?void 0:e.averageMonthlyDebits)||0,j.value=(e==null?void 0:e.averageMonthlyCredits)||0,B.value=(e==null?void 0:e.averageMonthlyBalance)||0,P.value=(e==null?void 0:e.averageWeeklyBalance)||0,z.value=(e==null?void 0:e.totalCreditTurnover)||0,dt.value=(e==null?void 0:e.averageMonthlyCredits)||0,H.value=(e==null?void 0:e.averageWeeklyCredits)||0,L.value=(e==null?void 0:e.totalDebitTurnOver)||0,it.value=(e==null?void 0:e.averageMonthlyDebits)||0,G.value=(e==null?void 0:e.averageWeeklyDebits)||0;const ut=(e==null?void 0:e.monthlyInflow)||[];J.value=ut.map(v=>({month:v.month_name+" "+v.year,credit:v.amount,debit:v.amount}));const _t=(e==null?void 0:e.weeklyInflow)||[];K.value=_t.map(v=>({week:`${v.month_name} ${v.year} Wk ${v.week}`,credit:v.amount,debit:v.amount}));const et=new Date(l==null?void 0:l.createdDate),st=new Date(l==null?void 0:l.endDate);!isNaN(et)&&!isNaN(st)?T.value=`${at(et).format("MMMM D, YYYY")} - ${at(st).format("MMMM D, YYYY")}`:T.value="Unknown period"}catch(w){console.error("Error fetching analysis result:",w),R.value="Unable to fetch analysis result."}finally{D.value=!1}};pt(()=>{const i=$.params.id;i?ct(i):(R.value="Invalid analysis ID.",D.value=!1)});const rt=async()=>{var m;const i=JSON.parse(localStorage.getItem("data")||"{}"),r=(i==null?void 0:i.token)||A.token,M=((m=i==null?void 0:i.user)==null?void 0:m.tenant_id)||A.tenant_id,C=$.params.id,k=`https://dev02201.getjupita.com/api/${M}/download-insight-report?analysis_id=${C}`;try{const y=await ot.get(k,{headers:{Authorization:`Bearer ${r}`}});console.log("download analysis response:",y.data)}catch(y){console.error("Download failed:",y),alert("Failed to download analysis. Please try again.")}};return(i,r)=>{const M=b("v-progress-circular"),C=b("RouterLink"),k=b("v-btn"),m=b("v-tab"),y=b("v-tabs"),g=b("v-tabs-window-item"),I=b("v-tabs-window");return p(),yt(ft,null,{default:_(()=>[t("div",bt,[wt,D.value?(p(),x("div",Mt,[h(M,{size:100,width:10,color:"primary",indeterminate:""})])):(p(),x("div",kt,[t("div",St,[h(C,{to:"/dashboard"},{default:_(()=>[t("button",{onClick:r[0]||(r[0]=(...d)=>i.goBack&&i.goBack(...d)),class:"mb-2 flex items-center text-blue-600 font-semibold"},[Ot,u(" Back ")])]),_:1}),t("div",At,[h(k,{onClick:rt,"no-uppercase":"",size:"small",class:"normal-case p-4 bg-blue-600 hover:bg-blue-700 text-white text-none mr-2 custom-btn"},{default:_(()=>[Dt,u(" Download Analysis ")]),_:1})])]),t("div",Ct,[t("p",null,[It,Tt,u(),Nt,u(" "+o(T.value),1)]),t("p",null,[jt,Bt,u(),Wt,u(" "+o(U.value),1)]),t("p",null,[Et,$t,u(),Rt,u(" "+o(V.value),1)])]),t("div",Ut,[h(y,{"align-tabs":"center",class:"custom-tabs mb-6",modelValue:O.value,"onUpdate:modelValue":r[1]||(r[1]=d=>O.value=d),color:"primary"},{default:_(()=>[h(m,{value:"summary"},{default:_(()=>[u("Summary")]),_:1}),h(m,{value:"cash flow"},{default:_(()=>[u("Cash Flow")]),_:1}),h(m,{value:"behavioral"},{default:_(()=>[u("Behavioral")]),_:1}),h(m,{value:"transactions"},{default:_(()=>[u("Transactions")]),_:1})]),_:1},8,["modelValue"]),h(I,{modelValue:O.value,"onUpdate:modelValue":r[2]||(r[2]=d=>O.value=d)},{default:_(()=>[h(g,{value:"summary"},{default:_(()=>[t("div",Vt,[t("div",Yt,[t("div",qt,o(n(q.value)),1),Pt]),t("div",zt,[t("div",Ht,o(n(Y.value)),1),Lt]),t("div",Gt,[t("div",Jt,o(n(j.value)),1),Kt]),t("div",Qt,[t("div",Xt,o(n(N.value)),1),Zt]),t("div",Ft,[t("div",te,o(n(B.value)),1),ee])]),t("div",se,[t("div",oe,[ae,t("p",le,[u(o(Q.value),1),ne])]),t("div",de,[ie,t("p",ce,o(),1),t("p",re,"Transaction Date: "+o(),1)]),t("div",ue,[_e,t("p",he,o(n(X.value)),1)])]),t("div",me,[ve,t("table",pe,[ye,t("tbody",null,[(p(!0),x(W,null,E(Z.value,(d,f)=>(p(),x("tr",{key:f,class:"text-sm text-gray-700 border-b border-gray-100 hover:bg-gray-50"},[t("td",fe,o(d.label),1),t("td",xe,o(n(d.monthly)),1),t("td",ge,o(n(d.total)),1)]))),128))])])])]),_:1}),h(g,{value:"cash flow"},{default:_(()=>[t("div",be,[t("div",we,[Me,t("div",ke,[t("div",Se,[Oe,t("span",Ae,o(n(z.value)),1)]),t("div",De,[Ce,t("span",Ie,o(n(j.value)),1)]),t("div",Te,[Ne,t("span",je,o(n(H.value)),1)])])]),t("div",Be,[We,t("div",Ee,[t("div",$e,[Re,t("span",Ue,o(n(L.value)),1)]),t("div",Ve,[Ye,t("span",qe,o(n(N.value)),1)]),t("div",Pe,[ze,t("span",He,o(n(G.value)),1)])])])]),t("div",Le,[t("div",Ge,[t("div",Je,[u(o(n(B.value))+" ",1),Ke]),t("div",Qe,[u(o(n(P.value))+" ",1),Xe])]),Ze]),t("div",Fe,[ts,t("div",es,[t("div",ss,[os,t("div",as,[t("table",ls,[ns,t("tbody",null,[(p(!0),x(W,null,E(J.value,(d,f)=>(p(),x("tr",{key:f,class:"border-b"},[t("td",ds,o(d.month),1),t("td",is,o(n(d.credit)),1),t("td",cs,o(n(d.debit)),1)]))),128))])])])]),t("div",rs,[us,t("div",_s,[t("table",hs,[ms,t("tbody",null,[(p(!0),x(W,null,E(K.value,(d,f)=>(p(),x("tr",{key:f,class:"border-b"},[t("td",vs,o(d.week),1),t("td",ps,o(n(d.credit)),1),t("td",ys,o(n(d.debit)),1)]))),128))])])])])])])]),_:1}),h(g,{value:"behavioral"},{default:_(()=>[fs]),_:1}),h(g,{value:"transactions"},{default:_(()=>[xs]),_:1})]),_:1},8,["modelValue"])])]))])]),_:1})}}},ws=ht(gs,[["__scopeId","data-v-f80135e8"]]);export{ws as default};
