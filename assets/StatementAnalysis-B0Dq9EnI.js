import{b as ut,_ as $e,r as s,u as je,e as Ue,f as _t,w as Ve,o as Pe,g as D,h as We,i as M,j as He,k as v,M as qe,l as Mt,m as A,n as t,p as T,q as p,s as y,t as o,F as tt,v as et,x as ue,y as Ge,z as ze,A as Ke,E as Yt,B as Je,C as Xe}from"./index-C25cRcxs.js";var _e={exports:{}};(function(G,ot){(function(z,P){P()})(ut,function(){function z(u,_){return typeof _>"u"?_={autoBom:!1}:typeof _!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),_={autoBom:!_}),_.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(u.type)?new Blob(["\uFEFF",u],{type:u.type}):u}function P(u,_,L){var m=new XMLHttpRequest;m.open("GET",u),m.responseType="blob",m.onload=function(){K(m.response,_,L)},m.onerror=function(){console.error("could not download file")},m.send()}function l(u){var _=new XMLHttpRequest;_.open("HEAD",u,!1);try{_.send()}catch{}return 200<=_.status&&299>=_.status}function W(u){try{u.dispatchEvent(new MouseEvent("click"))}catch{var _=document.createEvent("MouseEvents");_.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),u.dispatchEvent(_)}}var k=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof ut=="object"&&ut.global===ut?ut:void 0,U=k.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),K=k.saveAs||(typeof window!="object"||window!==k?function(){}:"download"in HTMLAnchorElement.prototype&&!U?function(u,_,L){var m=k.URL||k.webkitURL,x=document.createElement("a");_=_||u.name||"download",x.download=_,x.rel="noopener",typeof u=="string"?(x.href=u,x.origin===location.origin?W(x):l(x.href)?P(u,_,L):W(x,x.target="_blank")):(x.href=m.createObjectURL(u),setTimeout(function(){m.revokeObjectURL(x.href)},4e4),setTimeout(function(){W(x)},0))}:"msSaveOrOpenBlob"in navigator?function(u,_,L){if(_=_||u.name||"download",typeof u!="string")navigator.msSaveOrOpenBlob(z(u,L),_);else if(l(u))P(u,_,L);else{var m=document.createElement("a");m.href=u,m.target="_blank",setTimeout(function(){W(m)})}}:function(u,_,L,m){if(m=m||open("","_blank"),m&&(m.document.title=m.document.body.innerText="downloading..."),typeof u=="string")return P(u,_,L);var x=u.type==="application/octet-stream",ht=/constructor/i.test(k.HTMLElement)||k.safari,st=/CriOS\/[\d]+/.test(navigator.userAgent);if((st||x&&ht||U)&&typeof FileReader<"u"){var J=new FileReader;J.onloadend=function(){var V=J.result;V=st?V:V.replace(/^data:[^;]*;/,"data:attachment/file;"),m?m.location.href=V:location=V,m=null},J.readAsDataURL(u)}else{var X=k.URL||k.webkitURL,H=X.createObjectURL(u);m?m.location=H:location.href=H,m=null,setTimeout(function(){X.revokeObjectURL(H)},4e4)}});k.saveAs=K.saveAs=K,G.exports=K})})(_e);var Qe=_e.exports;const e=G=>(Je("data-v-73632611"),G=G(),Xe(),G),Fe={class:"p-2"},Ze={key:0,class:"flex items-center justify-center h-96"},to={key:1,class:"p-2 md:p-8"},eo=e(()=>t("i",{class:"fas fa-circle-arrow-left mr-2 text-xl",style:{color:"#2563eb"}},null,-1)),oo={class:"flex justify-between rounded p-4 bg-white"},so=e(()=>t("h2",{class:"text-md font-semibold mt-2 ml-6"},"Analysis result",-1)),no={class:"text-right"},ao=e(()=>t("i",{class:"fas fa-download mr-2"},null,-1)),lo={class:"grid grid-cols-1 md:grid-cols-3 gap-6 text-gray-700 mt-4 mb-6 bg-white rounded p-4"},co=e(()=>t("i",{class:"fas fa-calendar mr-2"},null,-1)),io=e(()=>t("strong",null,"Statement Period:",-1)),ro=e(()=>t("br",null,null,-1)),uo={class:"mt-3"},_o=e(()=>t("i",{class:"fas fa-user-circle mr-2"},null,-1)),ho=e(()=>t("strong",null,"Account Name:",-1)),mo=e(()=>t("br",null,null,-1)),po=e(()=>t("i",{class:"fas fa-id-card mr-2"},null,-1)),fo=e(()=>t("strong",null,"Account Number:",-1)),vo=e(()=>t("br",null,null,-1)),yo={class:"mt-6"},bo={class:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-4 px-4 bg-white rounded shdawo-lg p-4"},go={class:"bg-blue-50 text-center shadow rounded-2xl p-4 flex flex-col items-center justify-center"},xo={class:"text-md font-semibold"},wo=e(()=>t("div",{class:"text-sm text-gray-500 mt-1"},"Total Credit",-1)),Mo={class:"bg-red-50 text-center shadow rounded-2xl p-4 flex flex-col items-center justify-center"},So={class:"text-md font-semibold"},To=e(()=>t("div",{class:"text-sm text-gray-500 mt-1"},"Total Debits",-1)),Oo={class:"bg-green-50 text-center shadow rounded-2xl p-4 flex flex-col items-center justify-center"},Ao={class:"text-md font-semibold"},ko=e(()=>t("div",{class:"text-sm text-gray-500 mt-1"},"Avg. Monthly Credit",-1)),Yo={class:"bg-purple-50 text-center shadow rounded-2xl p-4 flex flex-col items-center justify-center"},Io={class:"text-md font-semibold"},Do=e(()=>t("div",{class:"text-sm text-gray-500 mt-1"},"Avg. Monthly Debits",-1)),Ro={class:"bg-gray-100 text-center shadow rounded-2xl p-4 flex flex-col items-center justify-center"},Eo={class:"text-md font-semibold"},Lo=e(()=>t("div",{class:"text-sm text-gray-500 mt-1"},"Average Monthly Balance",-1)),No={class:"flex flex-col md:flex-row gap-4 mt-4"},Bo={class:"bg-white rounded shadow-md p-4 w-full md:w-1/3"},Co=e(()=>t("p",{class:"text-sm mb-1"},"Most Frequent Expense",-1)),$o={class:"font-semibold text-gray-800 leading-tight"},jo=e(()=>t("br",null,null,-1)),Uo={class:"bg-white rounded shadow-md p-4 w-full md:w-1/3"},Vo={class:"text-sm mb-1"},Po={class:"font-semibold"},Wo={class:"text-sm mt-1"},Ho={class:"font-semibold"},qo={class:"bg-white rounded shadow-md p-4 w-full md:w-1/3"},Go=e(()=>t("p",{class:"text-sm mb-1"},"Most Frequent Expense Amount",-1)),zo={class:"font-semibold"},Ko={class:"bg-white p-6 rounded shadow-md overflow-x-auto mt-4"},Jo=e(()=>t("h2",{class:"text-lg font-semibold m-4"},"Expenses",-1)),Xo={class:"min-w-full table-auto border-collapse"},Qo=e(()=>t("thead",null,[t("tr",{class:"text-left text-sm font-normal border-b border-gray-200 bg-gray-100"},[t("th",{class:"py-3 px-4"},"Expenses"),t("th",{class:"py-3 px-4"},"Average Monthly Expenditure"),t("th",{class:"py-3 px-4"},"Total Expenditure")])],-1)),Fo={class:"py-3 px-4"},Zo={class:"py-3 px-4"},ts={class:"py-3 px-4"},es={class:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6"},os={class:"bg-white p-6 rounded shadow-sm"},ss=e(()=>t("h2",{class:"font-semibold text-md mb-4"},"Income Analysis",-1)),ns={class:"grid grid-cols-2 gap-4 text-sm"},as={class:"mb-4"},ls=e(()=>t("p",null,"Average Predicted Salary",-1)),ds={class:"font-semibold text-green-600"},cs={class:"mb-4"},is=e(()=>t("p",null,"Average Other Income",-1)),rs={class:"font-semibold"},us={class:"mt-4"},_s=e(()=>t("p",null,"Lowest Salary",-1)),hs={class:"font-semibold"},ms={class:"mt-4"},ps=e(()=>t("p",null,"Most Recent Salary",-1)),fs={class:"font-semibold"},vs={class:"bg-white p-6 rounded shadow-sm"},ys=e(()=>t("h2",{class:"font-semibold text-md mb-4"},"Pay Date Management",-1)),bs={class:"grid grid-cols-2 gap-4 text-sm"},gs={class:"mb-4"},xs=e(()=>t("p",null,"Expected Salary Payment Day",-1)),ws={class:"font-semibold text-green-600"},Ms={class:"mb-4"},Ss=e(()=>t("p",null,"No. of Salary Payments",-1)),Ts={class:"font-semibold"},Os={class:"mb-4"},As=e(()=>t("p",null,"Latest Salary Date",-1)),ks={class:"font-semibold"},Ys={class:"mb-4"},Is=e(()=>t("p",null,"Lowest Salary Date",-1)),Ds={class:"font-semibold"},Rs={class:"flex flex-col md:flex-row gap-4 text-gray-500 py-10"},Es={class:"flex-1 bg-white border p-6 rounded shadow"},Ls=e(()=>t("h2",{class:"text-lg font-semibold text-black-800 mb-4"},[y(" Inflow Summary "),t("i",{class:"fas fa-arrow-down text-black-600 ml-2"})],-1)),Ns={class:"space-y-4"},Bs={class:"mt-6"},Cs=e(()=>t("p",null,"Total Inflow",-1)),$s={class:"text-green-600 font-bold"},js={class:"flex justify-between mt-6"},Us={class:""},Vs=e(()=>t("p",null,"Average Monthly Inflow",-1)),Ps={class:"font-medium"},Ws={class:""},Hs=e(()=>t("p",null,"Average Weekly Inflow",-1)),qs={class:"font-medium"},Gs={class:"flex-1 bg-white border p-6 rounded shadow"},zs=e(()=>t("h2",{class:"text-lg font-semibold text-black-800 mb-4"},[y(" Outflow Summary "),t("i",{class:"fas fa-arrow-up text-black-600 ml-2"})],-1)),Ks={class:"space-y-4"},Js={class:"mt-6"},Xs=e(()=>t("p",null,"Total Outflow",-1)),Qs={class:"text-red-600 font-bold"},Fs={class:"flex justify-between mt-6"},Zs={class:""},tn=e(()=>t("p",null,"Average Monthly Outflow",-1)),en={class:"font-medium"},on={class:""},sn=e(()=>t("p",null,"Average Weekly Outflow",-1)),nn={class:"font-medium"},an={class:"flex gap-4 justify-between p-2"},ln={class:"flex justify-between bg-[#1f5aa3] text-white rounded p-6 w-full"},dn={class:"flex-1 text-sm"},cn={class:"text-sm mt-2 font-semibold"},rn={class:"flex-1 text- text-sm"},un={class:"text-sm mt-2 font-semibold"},_n={class:"flex justify-between bg-[#1f5aa3] text-white rounded p-6 w-full"},hn={class:"flex-1"},mn=e(()=>t("div",{class:"text-sm mt-2"},"Inflow to Outflow Rate",-1)),pn={class:"text-md font-semibold"},fn={class:"flex-1"},vn=e(()=>t("div",{class:"text-sm mt-2"},"Overall Inflow to Outflow",-1)),yn={class:"text-md font-semibold"},bn={class:"p-2 rounded shadow-md"},gn={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},xn={class:"bg-white p-4 rounded shadow"},wn=e(()=>t("h3",{class:"text-lg font-bold mb-6"},"Monthly Credit & Debit",-1)),Mn={class:"overflow-y-auto max-h-96"},Sn={class:"min-w-full table-auto text-sm text-left text-gray-600"},Tn=e(()=>t("thead",{class:"bg-gray-100 font-medium bg-gray-100"},[t("tr",null,[t("th",{class:"px-2 py-2"},"Month"),t("th",{class:"px-2 py-2"},"Total Credit"),t("th",{class:"px-2 py-2"},"Total Debit")])],-1)),On={class:"px-2 py-2"},An={class:"px-2 py-2"},kn={class:"px-2 py-2"},Yn={class:"font-semibold text-gray-800 bg-gray-50 border-t"},In=e(()=>t("td",{class:"px-2 py-2"},"Total",-1)),Dn={class:"px-2 text-green-800 py-2"},Rn={class:"px-2 text-red-800 py-2"},En={class:"bg-white p-4 rounded-lg shadow"},Ln=e(()=>t("h3",{class:"text-lg font-bold mb-6"},"Weekly Credit & Debit",-1)),Nn={class:"overflow-y-auto max-h-96"},Bn={class:"min-w-full table-auto text-sm text-left text-gray-600"},Cn=e(()=>t("thead",{class:"bg-gray-100 font-medium"},[t("tr",null,[t("th",{class:"px-2 py-2"},"Week"),t("th",{class:"px-2 py-2"},"Total Credit"),t("th",{class:"px-2 py-2"},"Total Debit")])],-1)),$n={class:"px-2 py-2"},jn={class:"px-2 py-2"},Un={class:"px-2 py-2"},Vn={class:"font-semibold text-gray-800 bg-gray-50 border-t"},Pn=e(()=>t("td",{class:"px-2 py-2"},"Total",-1)),Wn={class:"px-2 text-green-800 py-2"},Hn={class:"px-2 text-red-800 py-2"},qn={class:""},Gn={class:"bg-white p-6 rounded shadow-md mb-6"},zn=e(()=>t("h2",{class:"text-lg font-semibold mb-6 flex items-center gap-2"},[y(" Loan Analysis "),t("i",{class:"fas fa-info-circle text-blue-700 text-base"})],-1)),Kn={class:"grid grid-cols-1 md:grid-cols-4 gap-6 text-sm"},Jn=e(()=>t("p",{class:"text-gray-600"},"Number of Loan Transactions",-1)),Xn={class:"font-bold text-black"},Qn=e(()=>t("p",{class:"text-gray-600"},"Total Loan Amount",-1)),Fn={class:"text-red-600 font-bold"},Zn=e(()=>t("p",{class:"text-gray-600"},"Average Monthly Loan Amount",-1)),ta={class:"text-blue-700 font-bold"},ea=e(()=>t("p",{class:"text-gray-600"},"Total Loan Repayment Amount",-1)),oa={class:"text-green-600 font-bold"},sa=e(()=>t("p",{class:"text-gray-600"},"Avg. Monthly Loan Repayment Amt",-1)),na={class:"text-black font-bold"},aa=e(()=>t("p",{class:"text-gray-600"},"Loan to Inflow Rate",-1)),la={class:"text-black font-bold"},da=e(()=>t("p",{class:"text-gray-600"},"Latest Loan Transaction Date",-1)),ca={class:"text-black font-bold"},ia=e(()=>t("p",{class:"text-gray-600"},"Latest Loan Repayment Transaction Date",-1)),ra={class:"text-black font-bold"},ua={class:"bg-[#1f5aa3] p-6 rounded shadow-md mb-6"},_a=e(()=>t("h2",{class:"text-lg font-semibold text-white mb-6 flex items-center gap-2"},[y(" Patterns "),t("i",{class:"fas fa-chart-line text-white text-xs"})],-1)),ha={class:"grid grid-cols-1 md:grid-cols-4 gap-6 text-sm text-white"},ma=e(()=>t("p",null,"Account Sweep",-1)),pa=e(()=>t("p",null,"Number of Betting Transactions",-1)),fa={class:"font-bold"},va=e(()=>t("p",null,"Gambling Rate",-1)),ya={class:"font-bold"},ba=e(()=>t("p",null,"Transactions between 500k - 1M",-1)),ga={class:"font-bold"},xa=e(()=>t("p",null,"Percentage of Credit Transactions",-1)),wa={class:"font-bold"},Ma=e(()=>t("p",null,"Percentage of Debit Transactions",-1)),Sa={class:"font-bold"},Ta=e(()=>t("p",null,"Most Frequent",-1)),Oa={class:"font-bold"},Aa=e(()=>t("p",null,"Transactions Greater than 1M",-1)),ka={class:"font-bold"},Ya={class:"bg-white p-6 rounded-lg shadow text-sm text-gray-800"},Ia=e(()=>t("h2",{class:"text-base font-semibold mb-4"},"Self Transfer Summary",-1)),Da={class:"grid grid-cols-3 gap-4 mb-6"},Ra=e(()=>t("div",null,"Number of Self Transfer (Inflow)",-1)),Ea={class:"font-bold mt-1"},La=e(()=>t("div",null,"Value of Self Transfer (Inflow)",-1)),Na={class:"text-green-600 font-bold mt-1"},Ba=e(()=>t("div",null,"Total Number of Transactions",-1)),Ca={class:"font-bold mt-1"},$a=e(()=>t("div",null,"Number of Self Transfer (Outflow)",-1)),ja={class:"font-bold mt-1"},Ua=e(()=>t("div",null,"Value of Self Transfer (Outflow)",-1)),Va={class:"text-red-600 font-bold mt-1"},Pa=e(()=>t("div",null,"Returned Cheque",-1)),Wa={class:"font-bold mt-1"},Ha={class:"flex flex-col md:flex-row gap-6 justify-between mt-4"},qa={class:"w-full md:w-1/2"},Ga={class:"bg-white rounded border shadow p-4 max-h-96 overflow-y-auto"},za=e(()=>t("h3",{class:"font-semibold text-sm md:text-base mb-4"}," Self Transfer Transactions ",-1)),Ka={class:"w-full text-sm text-left"},Ja=e(()=>t("thead",{class:"font-semibold bg-gray-100"},[t("tr",null,[t("th",{class:"py-2 px-4"},"Month"),t("th",{class:"py-2 px-4"},"Inflow"),t("th",{class:"py-2 px-4"},"Outflow")])],-1)),Xa={key:0},Qa=e(()=>t("td",{colspan:"3",class:"text-center py-4 text-gray-500"}," No data available ",-1)),Fa=[Qa],Za={class:"py-2 px-4"},tl={class:"py-2 px-4"},el={class:"py-2 px-4"},ol={class:"w-full md:w-1/2"},sl={class:"bg-white border rounded shadow p-4 max-h-96 overflow-y-auto"},nl=e(()=>t("h3",{class:"font-semibold text-sm md:text-base mb-4"}," Account Balance Analysis ",-1)),al={class:"w-full text-sm text-left"},ll=e(()=>t("thead",{class:"font-semibold bg-gray-100"},[t("tr",null,[t("th",{class:"py-2 px-4"},"Month"),t("th",{class:"py-2 px-4"},"Highest Balance"),t("th",{class:"py-2 px-4"},"Lowest Balance")])],-1)),dl={class:"py-2 px-4"},cl={class:"py-2 px-4"},il={class:"py-2 px-4"},rl={class:"py-4"},ul=e(()=>t("span",{class:"text-md font-semibold mt-6 ml-2"},"Transaction History",-1)),_l={class:"flex items-center justify-between p-2"},hl={class:"flex items-center space-x-4 pt-2"},ml=e(()=>t("i",{class:"fa-solid fa-filter"},null,-1)),pl=e(()=>t("i",{class:"fas fa-search text-[#1f5aa3]"},null,-1)),fl={class:"relative min-h-[200px]"},vl=e(()=>t("thead",{class:"font-semibold bg-gray-100"},[t("tr",null,[t("th",{class:"px-2 py-3 font-semibold"},"S/N"),t("th",{class:"px-2 py-3 font-semibold"},"Date"),t("th",{class:"px-2 py-3 font-semibold"},"Description"),t("th",{class:"px-2 py-3 font-semibold"},"Type"),t("th",{class:"px-2 py-3 font-semibold"},"Amount"),t("th",{class:"px-2 py-3 font-semibold"},"Balance")])],-1)),yl={class:"px-2 py-4"},bl={class:"px-2 py-4"},gl={class:"px-2 py-4"},xl={class:"px-6 py-4 font-semibold"},wl={class:"px-2 py-4"},Ml={class:"px-2 py-4"},Sl=e(()=>t("span",null,"1â€“12 of 12",-1)),Tl={class:"flex items-center space-x-2"},Ol=e(()=>t("span",null,"Rows per page:",-1)),Al={__name:"StatementAnalysis",setup(G){const ot=s("Summary"),z=i=>i?A(i).format("MMMM Do YYYY"):"N/A";function P(i){return typeof i!="number"?"0%":`${(i*100).toFixed(2)}%`}function l(i){return new Intl.NumberFormat("en-NG",{style:"currency",currency:"NGN",minimumFractionDigits:2}).format(i||0)}const W=s(15),k=je(),U=Ue(),K=s(null),u=s(!0),_=s(null),L=s(""),m=s(""),x=s(""),ht=s(""),st=s(0),J=s(0),X=s(0),H=s(0),V=s(0),It=s(0),St=s(0),he=s(0),Dt=s(0),nt=s(0),me=s(0),Rt=s(0),mt=s([]),pt=s([]),pe=_t(()=>mt.value.reduce((i,r)=>i+r.credit,0)),fe=_t(()=>mt.value.reduce((i,r)=>i+r.debit,0)),ve=_t(()=>pt.value.reduce((i,r)=>i+r.credit,0)),ye=_t(()=>pt.value.reduce((i,r)=>i+r.debit,0)),Et=s(0),Lt=s(0),Nt=s(0),Bt=s(""),Ct=s([]),$t=s(""),jt=s(""),Ut=s(""),Vt=s(""),Pt=s(0),Tt=s(""),Wt=s(0),Ht=s(""),be=s(0),ge=s(0),qt=s(0),Gt=s(0),zt=s(0),Kt=s(0),Jt=s(0),xe=s(0),we=s(0),Xt=s(""),Qt=s([]),Ft=s(""),Me=s(""),Se=s(0),Te=s(""),Zt=s(0),te=s(0),ee=s(0),oe=s(0),se=s(0),Ot=s(0),ne=s(0),ae=s(0),ft=s([]),le=s([]),At=s([]),vt=s([]),$=s({}),Oe=async i=>{var w,R,S,B,N,F,lt,q,Z,bt,gt,xt,c;const r=JSON.parse(localStorage.getItem("data")||"{}"),j=(r==null?void 0:r.token)||U.token,O=`https://staging.getjupita.com/api/${((w=r==null?void 0:r.user)==null?void 0:w.tenant_id)||U.tenant_id}/get-analysis-result?analysis_id=${i}`;u.value=!0;try{let ce=function(a){return A(a,"M-YYYY").format("MMM YYYY")};const b=await Mt.get(O,{headers:{Authorization:`Bearer ${j}`,"Content-Type":"application/json"}});console.log("statement analysis result page data:",b),K.value=b.data;const h=(B=(S=(R=b.data)==null?void 0:R.data)==null?void 0:S.analysis_result)==null?void 0:B.analysis_result;L.value=(h==null?void 0:h.name)||"N/A",m.value=(h==null?void 0:h.clientFullName)||"N/A",ht.value=(h==null?void 0:h.accountId)||"N/A";const g=(h==null?void 0:h.behavioralAnalysis)||{};console.log("behavioural:",g),$.value=(h==null?void 0:h.incomeAnalysis)||{},console.log("income:",$.value),Tt.value=g.accountSweep||"No",Wt.value=g.gamblingRate||0,Ht.value=g.gamblingStatus||"N/A",be.value=g.loanInflowRate||0,ge.value=g.accountActivity||0,qt.value=g.totalLoanAmount||0,Gt.value=g.loanToInflowRate||0,zt.value=g.numberLoanTransactions||0,Kt.value=g.averageMonthlyLoanAmount||0,Jt.value=g.totalLoanRepaymentAmount||0,xe.value=g.loanRepaymentToInflowRate||0,we.value=g.numberRepaymentTransactions||0,Qt.value=g.latestRepaymentTransaction||[];const wt=Qt.value[0]||null;Ft.value=wt!=null&&wt.date?A(wt.date).format("MMM D, YYYY"):"N/A";const de=(N=g.latestLoanTransaction)==null?void 0:N[0];Xt.value=de?A(de.date).format("MMMM D, YYYY"):"N/A",Me.value=g.overallInflowToOutflowRate||"N/A",Se.value=g.percentOfInflowIrregularity||0,Te.value=g.monthToMonthInflowToOutflowRate||"N/A",Zt.value=g.averageMonthlyLoanRepaymentAmount||0;const n=h==null?void 0:h.cashFlowAnalysis;console.log("cash flow data:",n),Et.value=h==null?void 0:h.spendAnalysis.mostFrequentExpense,Lt.value=h==null?void 0:h.spendAnalysis.mostFrequentExpenseAmount;const d=((Z=(q=(lt=(F=b.data)==null?void 0:F.data)==null?void 0:lt.analysis_result)==null?void 0:q.analysis_result)==null?void 0:Z.spendAnalysis)||{},I=((c=(xt=(gt=(bt=b.data)==null?void 0:bt.data)==null?void 0:gt.analysis_result)==null?void 0:xt.analysis_result)==null?void 0:c.transactionPatternAnalysis)||{};console.log("pattern analysis:",I),$t.value=(I.percentDebitTransactions*100).toFixed(2)+"%",jt.value=(I.percentCreditTransactions*100).toFixed(2)+"%",Ut.value=(I.percentOfTransactionsBetween500ThousandToOneMillionNaira*100).toFixed(2)+"%",Vt.value=(I.percentOfTransactionsGreaterThanOneMillionNaira*100).toFixed(2)+"%",Pt.value=I.mostFrequentBalanceRange,te.value=I.noOfSelfTransferInflows,ee.value=I.noOfSelfTransferOutflows,oe.value=I.selfTransferInflowAmount,se.value=I.selfTransferOutflowAmount,ne.value=I.totalNumberOfTransactions,ae.value=I.returnCheque;const Ie=I.selfTransferInflowTransactionsByMonth||[],De=I.selfTransferOutflowTransactionsByMonth||[],dt=new Map;Ie.forEach(a=>{const f=ce(a.date);dt.set(f,{month:f,inflow:a.amount,outflow:0})}),De.forEach(a=>{const f=ce(a.date);dt.has(f)?dt.get(f).outflow=a.amount:dt.set(f,{month:f,inflow:0,outflow:a.amount})}),ft.value=Array.from(dt.values()).sort((a,f)=>A(a.month,"MMM YYYY")-A(f.month,"MMM YYYY")),Nt.value=d.highestSpend,Bt.value=A(d.monthWithHighestSpend,"M/YYYY").format("MMMM YYYY"),Ct.value=[{label:"Rent",monthly:d.averageMonthlySpendOnRent??0,total:12*(d.averageMonthlySpendOnRent??0)},{label:"Hospitality and Food",monthly:d.averageMonthlySpendOnHospitalityAndFood??0,total:12*(d.averageMonthlySpendOnHospitalityAndFood??0)},{label:"Transportation",monthly:d.averageMonthlySpendOnTransportation??0,total:12*(d.averageMonthlySpendOnTransportation??0)},{label:"Utilities",monthly:d.averageMonthlySpendOnUtilities??0,total:12*(d.averageMonthlySpendOnUtilities??0)},{label:"Charges and Stamp Duty",monthly:d.averageMonthlySpendOnChargesAndStampDuty??0,total:12*(d.averageMonthlySpendOnChargesAndStampDuty??0)},{label:"Transfer",monthly:d.averageMonthlySpendOnTransfer??0,total:12*(d.averageMonthlySpendOnTransfer??0)},{label:"ATM Withdrawals and POS",monthly:d.averageMonthlySpendOnAtmAndPOS??0,total:12*(d.averageMonthlySpendOnAtmAndPOS??0)},{label:"Airtime and Data",monthly:d.averageMonthlySpendOnAirtimeAndData??0,total:12*(d.averageMonthlySpendOnAirtimeAndData??0)},{label:"Crypto",monthly:d.averageMonthlySpendOnCrypto??0,total:12*(d.averageMonthlySpendOnCrypto??0)},{label:"Entertainment",monthly:d.averageMonthlySpendOnEntertainment??0,total:12*(d.averageMonthlySpendOnEntertainment??0)},{label:"Health",monthly:d.averageMonthlySpendOnHealth??0,total:12*(d.averageMonthlySpendOnHealth??0)},{label:"Gambling",monthly:d.averageMonthlySpendOnGambling??0,total:12*(d.averageMonthlySpendOnGambling??0)},{label:"Insurance",monthly:d.averageMonthlySpendOnInsurance??0,total:12*(d.averageMonthlySpendOnInsurance??0)},{label:"International Transactions",monthly:d.averageMonthlySpendOnInternationalTransactions??0,total:12*(d.averageMonthlySpendOnInternationalTransactions??0)},{label:"Online and Web",monthly:d.averageMonthlySpendOnOnlineAndWeb??0,total:12*(d.averageMonthlySpendOnOnlineAndWeb??0)},{label:"Savings and Investments",monthly:d.averageMonthlySpendOnSavingsAndInvestments??0,total:12*(d.averageMonthlySpendOnSavingsAndInvestments??0)},{label:"Travel",monthly:d.averageMonthlySpendOnTravel??0,total:12*(d.averageMonthlySpendOnTravel??0)},{label:"USSD",monthly:d.averageMonthlySpendOnUSSD??0,total:12*(d.averageMonthlySpendOnUSSD??0)},{label:"Total Expenses",monthly:d.averageMonthlyTotalExpenses??0,total:12*(d.averageMonthlyTotalExpenses??0)},{label:"Transfer Via Agents",monthly:d.averageMonthlyTransactionsViaAgents??0,total:12*(d.averageMonthlyTransactionsViaAgents??0)},{label:"Others",monthly:d.averageMonthlySpendOnOthers??0,total:12*(d.averageMonthlySpendOnOthers??0)}],st.value=(n==null?void 0:n.totalDebitTurnOver)||0,J.value=(n==null?void 0:n.totalCreditTurnover)||0,X.value=(n==null?void 0:n.averageMonthlyDebits)||0,H.value=(n==null?void 0:n.averageMonthlyCredits)||0,V.value=(n==null?void 0:n.averageMonthlyBalance)||0,It.value=(n==null?void 0:n.averageWeeklyBalance)||0,St.value=(n==null?void 0:n.totalCreditTurnover)||0,he.value=(n==null?void 0:n.averageMonthlyCredits)||0,Dt.value=(n==null?void 0:n.averageWeeklyCredits)||0,nt.value=(n==null?void 0:n.totalDebitTurnOver)||0,me.value=(n==null?void 0:n.averageMonthlyDebits)||0,Rt.value=(n==null?void 0:n.averageWeeklyDebits)||0;const Re=(n==null?void 0:n.monthlyHighestBalance)||[],Ee=(n==null?void 0:n.monthlyLowestBalance)||[];Ot.value=nt.value!==0?+((St.value-nt.value)/nt.value*100).toFixed(2):0;const ct=new Map;Re.forEach(a=>{const f=`${a.month_name} ${a.year}`,E=A(f,"MMMM YYYY").format("MMM YYYY"),C=`${a.month_name}-${a.year}`;ct.set(C,{month:E,highest:a.highest_balance,lowest:0})}),Ee.forEach(a=>{const f=`${a.month_name} ${a.year}`,E=A(f,"MMMM YYYY").format("MMM YYYY"),C=`${a.month_name}-${a.year}`;ct.has(C)?ct.get(C).lowest=a.lowest_balance:ct.set(C,{month:E,highest:0,lowest:a.lowest_balance})}),le.value=Array.from(ct.values());const Le=(n==null?void 0:n.monthlyInflow)||[],Ne=(n==null?void 0:n.monthlyOutflow)||[],it=new Map;Le.forEach(a=>{const f=`${a.month_name} ${a.year}`,E=A(f,"MMMM YYYY").format("MMM YYYY"),C=`${a.month_name}-${a.year}`;it.set(C,{month:E,credit:a.amount,debit:0})}),Ne.forEach(a=>{const f=`${a.month_name} ${a.year}`,E=A(f,"MMMM YYYY").format("MMM YYYY"),C=`${a.month_name}-${a.year}`;it.has(C)?it.get(C).debit=a.amount:it.set(C,{month:E,credit:0,debit:a.amount})}),mt.value=Array.from(it.values());const Be=(n==null?void 0:n.weeklyInflow)||[],Ce=(n==null?void 0:n.weeklyOutflow)||[],rt=new Map;Be.forEach(a=>{const f=A().month(a.month_name).format("MMM"),E=`${a.year}-${f}-W${a.week}`;rt.set(E,{week:`${f} ${a.year} | ${a.week}`,credit:a.amount,debit:0})}),Ce.forEach(a=>{const f=A().month(a.month_name).format("MMM"),E=`${a.year}-${f}-W${a.week}`;rt.has(E)?rt.get(E).debit=a.amount:rt.set(E,{week:`${f} ${a.year} ${a.week}`,credit:0,debit:a.amount})}),pt.value=Array.from(rt.values());const ie=new Date(h==null?void 0:h.startDate),re=new Date(h==null?void 0:h.endDate);!isNaN(ie)&&!isNaN(re)?x.value=`${A(ie).format("MMMM D, YYYY")} - ${A(re).format("MMMM D, YYYY")}`:x.value="Unknown period"}catch(b){console.error("Error fetching analysis result:",b),_.value="Unable to fetch analysis result."}finally{u.value=!1}},Ae=_t(()=>{const i=Ot.value;return i>0?"Positive cash flow":i<0?"Negative cash flow":"neutral"}),ke=async i=>{var R;const r=JSON.parse(localStorage.getItem("data")||"{}"),j=(r==null?void 0:r.token)||U.token,Y=((R=r==null?void 0:r.user)==null?void 0:R.tenant_id)||U.tenant_id,O=k.params.id,w=`https://staging.getjupita.com/api/${Y}/get-statement-transactions?analysis_id=${O}`;try{const S=await Mt.get(w,{headers:{Authorization:`Bearer ${j}`}});console.log("fetch transactions response:",S),vt.value=S.data.data.transactions,At.value=[...vt.value]}catch(S){console.error(S)}},yt=s(""),at=s(null),Q=s([]),kt=s(!1);Ve([yt,at,Q,vt],async()=>{var j;kt.value=!0,await Ke();let i=vt.value;const r=(j=yt.value)==null?void 0:j.toLowerCase().trim();if(r&&(i=i.filter(Y=>Object.values(Y).some(O=>O==null?void 0:O.toString().toLowerCase().includes(r)))),at.value&&(i=i.filter(Y=>Y.type===at.value)),Q.value&&Q.value.length===2){const[Y,O]=Q.value.map(w=>new Date(w).getTime());i=i.filter(w=>{const R=new Date(w.date).getTime();return R>=Y&&R<=O})}At.value=i,await new Promise(Y=>setTimeout(Y,300)),kt.value=!1}),Pe(()=>{const i=k.params.id;i?(Oe(i),ke()):(_.value="Invalid analysis ID.",u.value=!1)});const Ye=async()=>{var w,R,S;const i=JSON.parse(localStorage.getItem("data")||"{}"),r=(i==null?void 0:i.token)||U.token,j=((w=i==null?void 0:i.user)==null?void 0:w.tenant_id)||U.tenant_id,Y=k.params.id,O=`https://staging.getjupita.com/api/${j}/download-insight-report?analysis_id=${Y}`;try{Yt({title:"Downloading",message:"Getting your analysis report...",type:"info",duration:3e3});const B=await Mt.get(O,{headers:{Authorization:`Bearer ${r}`}}),N=(S=(R=B==null?void 0:B.data)==null?void 0:R.data)==null?void 0:S.download;if(!(N!=null&&N.document_url)||!(N!=null&&N.document_name))throw new Error("No download information or document URL found in the response.");const F=N.document_url,q="analysis_report.pdf",Z=await Mt.get(F,{responseType:"blob"});Qe.saveAs(Z.data,q),Yt({title:"Success",message:"Analysis report downloaded successfully.",type:"success",duration:6e3})}catch(B){console.error("Download failed:",B),Yt({title:"Error",message:"Failed to download analysis. Please try again.",type:"error",duration:6e3})}};return(i,r)=>{const j=D("v-progress-circular"),Y=D("RouterLink"),O=D("v-btn"),w=D("v-tab"),R=D("v-tabs"),S=D("v-tabs-window-item"),B=D("v-select"),N=D("v-text-field"),F=D("el-date-picker"),lt=D("v-table"),q=D("v-icon"),Z=D("v-card-actions"),bt=D("v-card"),gt=D("v-tabs-window"),xt=We("loading");return M(),He(qe,null,{default:v(()=>[t("div",Fe,[u.value?(M(),T("div",Ze,[p(j,{size:100,width:10,color:"primary",indeterminate:""})])):(M(),T("div",to,[p(Y,{to:"/dashboard"},{default:v(()=>[t("button",{onClick:r[0]||(r[0]=(...c)=>i.goBack&&i.goBack(...c)),class:"mb-4 flex items-center text-black text-lg font-normal"},[eo,y(" Back ")])]),_:1}),t("div",oo,[so,t("div",no,[p(O,{onClick:Ye,"no-uppercase":"",size:"small",class:"normal-case p-4 bg-blue-600 hover:bg-blue-700 text-white text-none mr-2 custom-btn"},{default:v(()=>[ao,y(" Export PDF ")]),_:1})])]),t("div",lo,[t("p",null,[co,io,y(),ro,t("span",uo,o(x.value),1)]),t("p",null,[_o,ho,y(),mo,y(" "+o(m.value),1)]),t("p",null,[po,fo,y(),vo,y(" "+o(ht.value),1)])]),t("div",yo,[p(R,{modelValue:ot.value,"onUpdate:modelValue":r[1]||(r[1]=c=>ot.value=c),"align-tabs":"start",class:"custom-tabs mb-4",color:"primary",grow:""},{default:v(()=>[p(w,{value:"summary"},{default:v(()=>[y("Summary")]),_:1}),p(w,{value:"income"},{default:v(()=>[y("Income")]),_:1}),p(w,{value:"cash flow"},{default:v(()=>[y("Cash Flow")]),_:1}),p(w,{value:"behavioral"},{default:v(()=>[y("Behavioral")]),_:1}),p(w,{value:"transactions"},{default:v(()=>[y("Transactions")]),_:1})]),_:1},8,["modelValue"]),p(gt,{modelValue:ot.value,"onUpdate:modelValue":r[6]||(r[6]=c=>ot.value=c)},{default:v(()=>[p(S,{value:"summary"},{default:v(()=>[t("div",bo,[t("div",go,[t("div",xo,o(l(J.value)),1),wo]),t("div",Mo,[t("div",So,o(l(st.value)),1),To]),t("div",Oo,[t("div",Ao,o(l(H.value)),1),ko]),t("div",Yo,[t("div",Io,o(l(X.value)),1),Do]),t("div",Ro,[t("div",Eo,o(l(V.value)),1),Lo])]),t("div",No,[t("div",Bo,[Co,t("p",$o,[y(o(Et.value),1),jo])]),t("div",Uo,[t("p",Vo,[y(" Highest Spend: "),t("span",Po,o(l(Nt.value)),1)]),t("p",Wo,[y(" Transaction Date: "),t("span",Ho,o(Bt.value),1)])]),t("div",qo,[Go,t("p",zo,o(l(Lt.value)),1)])]),t("div",Ko,[Jo,t("table",Xo,[Qo,t("tbody",null,[(M(!0),T(tt,null,et(Ct.value,(c,b)=>(M(),T("tr",{key:b,class:"text-sm text-gray-700 border-b border-gray-100 hover:bg-gray-50"},[t("td",Fo,o(c.label),1),t("td",Zo,o(l(c.monthly)),1),t("td",ts,o(l(c.total)),1)]))),128))])])])]),_:1}),p(S,{value:"income"},{default:v(()=>[t("div",es,[t("div",os,[ss,t("div",ns,[t("div",as,[ls,t("p",ds,o(l($.value.averagePredictedSalary)),1)]),t("div",cs,[is,t("p",rs,o(l($.value.averageOtherIncome)),1)]),t("div",us,[_s,t("p",hs,o(l($.value.lowestSalary)),1)]),t("div",ms,[ps,t("p",fs,o(l($.value.mostRecentSalary)),1)])])]),t("div",vs,[ys,t("div",bs,[t("div",gs,[xs,t("p",ws,o($.value.expectedSalaryPaymentDay||0),1)]),t("div",Ms,[Ss,t("p",Ts,o($.value.numberOfSalaryPayments||0),1)]),t("div",Os,[As,t("p",ks,o(z($.value.lastDateOfSalaryPayment)),1)]),t("div",Ys,[Is,t("p",Ds,o(z($.value.lowestSalaryDate)),1)])])])])]),_:1}),p(S,{value:"cash flow"},{default:v(()=>[t("div",Rs,[t("div",Es,[Ls,t("div",Ns,[t("div",Bs,[Cs,t("span",$s,o(l(St.value)),1)]),t("div",js,[t("div",Us,[Vs,t("span",Ps,o(l(H.value)),1)]),t("div",Ws,[Hs,t("span",qs,o(l(Dt.value)),1)])])])]),t("div",Gs,[zs,t("div",Ks,[t("div",Js,[Xs,t("span",Qs,o(l(nt.value)),1)]),t("div",Fs,[t("div",Zs,[tn,t("span",en,o(l(X.value)),1)]),t("div",on,[sn,t("span",nn,o(l(Rt.value)),1)])])])])]),t("div",an,[t("div",ln,[t("div",dn,[y(" Average Monthly Balance "),t("div",cn,o(l(V.value)),1)]),t("div",rn,[y(" Average Weekly Balance "),t("div",un,o(l(It.value)),1)])]),t("div",_n,[t("div",hn,[mn,t("div",pn,o(Ae.value),1)]),t("div",fn,[vn,t("div",yn,o(P(Ot.value)),1)])])]),t("div",bn,[t("div",gn,[t("div",xn,[wn,t("div",Mn,[t("table",Sn,[Tn,t("tbody",null,[(M(!0),T(tt,null,et(mt.value,(c,b)=>(M(),T("tr",{key:b,class:"border-b"},[t("td",On,o(c.month),1),t("td",An,o(l(c.credit)),1),t("td",kn,o(l(c.debit)),1)]))),128))]),t("tfoot",Yn,[t("tr",null,[In,t("td",Dn,o(l(pe.value)),1),t("td",Rn,o(l(fe.value)),1)])])])])]),t("div",En,[Ln,t("div",Nn,[t("table",Bn,[Cn,t("tbody",null,[(M(!0),T(tt,null,et(pt.value,(c,b)=>(M(),T("tr",{key:b,class:"border-b"},[t("td",$n,o(c.week),1),t("td",jn,o(l(c.credit)),1),t("td",Un,o(l(c.debit)),1)]))),128))]),t("tfoot",Vn,[t("tr",null,[Pn,t("td",Wn,o(l(ve.value)),1),t("td",Hn,o(l(ye.value)),1)])])])])])])])]),_:1}),p(S,{value:"behavioral"},{default:v(()=>[t("div",qn,[t("div",Gn,[zn,t("div",Kn,[t("div",null,[Jn,t("p",Xn,o(zt.value),1)]),t("div",null,[Qn,t("p",Fn,o(l(qt.value)),1)]),t("div",null,[Zn,t("p",ta,o(l(Kt.value)),1)]),t("div",null,[ea,t("p",oa,o(l(Jt.value)),1)]),t("div",null,[sa,t("p",na,o(l(Zt.value)),1)]),t("div",null,[aa,t("p",la,o(l(Gt.value)),1)]),t("div",null,[da,t("p",ca,o(Xt.value),1)]),t("div",null,[ia,t("p",ra,o(Ft.value),1)])])]),t("div",ua,[_a,t("div",ha,[t("div",null,[ma,t("p",{class:ue(Tt.value==="YES"?"font-bold text-white":"text-gray-300")},o(Tt.value),3)]),t("div",null,[pa,t("p",fa,o(Ht.value),1)]),t("div",null,[va,t("p",ya,o(Wt.value),1)]),t("div",null,[ba,t("p",ga,o(Ut.value),1)]),t("div",null,[xa,t("p",wa,o(jt.value),1)]),t("div",null,[Ma,t("p",Sa,o($t.value),1)]),t("div",null,[Ta,t("p",Oa,o(Pt.value),1)]),t("div",null,[Aa,t("p",ka,o(Vt.value),1)])])])]),t("div",Ya,[Ia,t("div",Da,[t("div",null,[Ra,t("div",Ea,o(te.value),1)]),t("div",null,[La,t("div",Na,o(l(oe.value)),1)]),t("div",null,[Ba,t("div",Ca,o(ne.value),1)]),t("div",null,[$a,t("div",ja,o(ee.value),1)]),t("div",null,[Ua,t("div",Va,o(l(se.value)),1)]),t("div",null,[Pa,t("div",Wa,o(l(ae.value)),1)])])]),t("div",Ha,[t("div",qa,[t("div",Ga,[za,t("table",Ka,[Ja,t("tbody",null,[!ft.value||ft.value.length===0?(M(),T("tr",Xa,Fa)):Ge("",!0),(M(!0),T(tt,null,et(ft.value,(c,b)=>(M(),T("tr",{key:b,class:"border-b last:border-none"},[t("td",Za,o(c.month),1),t("td",tl,o(l(c.inflow)),1),t("td",el,o(l(c.outflow)),1)]))),128))])])])]),t("div",ol,[t("div",sl,[nl,t("table",al,[ll,t("tbody",null,[(M(!0),T(tt,null,et(le.value,(c,b)=>(M(),T("tr",{key:b},[t("td",dl,o(c.month),1),t("td",cl,o(l(c.highest)),1),t("td",il,o(l(c.lowest)),1)]))),128))])])])])])]),_:1}),p(S,{value:"transactions"},{default:v(()=>[t("div",rl,[p(bt,{class:"rounded-lg shadow-md pa-4"},{default:v(()=>[ul,t("div",_l,[t("div",hl,[ml,p(B,{modelValue:at.value,"onUpdate:modelValue":r[2]||(r[2]=c=>at.value=c),items:["CREDIT","DEBIT"],color:"[#1f5aa3]",label:"Status",density:"compact","hide-details":"",variant:"outlined",class:"w-32"},null,8,["modelValue"])]),p(N,{modelValue:yt.value,"onUpdate:modelValue":r[3]||(r[3]=c=>yt.value=c),rounded:"",placeholder:"Search for a transaction",density:"compact","hide-details":"",variant:"outlined",class:"max-w-xs rounded-md",label:"Search",color:"[#1f5aa3]","append-inner-icon":""},{"append-inner":v(()=>[pl]),_:1},8,["modelValue"])]),p(F,{modelValue:Q.value,"onUpdate:modelValue":r[4]||(r[4]=c=>Q.value=c),type:"daterange","range-separator":"to","start-placeholder":"Start date","end-placeholder":"End date",class:"w-20 m-2",size:"small"},null,8,["modelValue"]),ze((M(),T("div",fl,[p(lt,{class:"min-w-full text-sm pa-2"},{default:v(()=>[vl,t("tbody",null,[(M(!0),T(tt,null,et(At.value,(c,b)=>(M(),T("tr",{key:b,class:"border-t border-gray-200 hover:bg-gray-50 transition-colors"},[t("td",yl,o(b+1),1),t("td",bl,o(z(c.date)),1),t("td",gl,o(c.description),1),t("td",xl,[t("span",{class:ue(c.type==="CREDIT"?"text-green-600 py-1 px-2 text-xs font-semibold rounded-full bg-green-100":"text-red-600 py-1 px-2 text-xs font-semibold rounded-full bg-red-100")},o(c.type),3)]),t("td",wl,o(l(c.amount)),1),t("td",Ml,o(l(c.balance)),1)]))),128))])]),_:1})])),[[xt,kt.value]]),p(Z,{class:"justify-between px-6 py-4 text-sm text-gray-500"},{default:v(()=>[Sl,t("div",Tl,[Ol,p(B,{items:[15,30,45],modelValue:W.value,"onUpdate:modelValue":r[5]||(r[5]=c=>W.value=c),density:"compact","hide-details":"",class:"w-20",variant:"outlined"},null,8,["modelValue"]),p(O,{icon:"",density:"comfortable"},{default:v(()=>[p(q,null,{default:v(()=>[y("mdi-chevron-left")]),_:1})]),_:1}),p(O,{icon:"",density:"comfortable"},{default:v(()=>[p(q,null,{default:v(()=>[y("mdi-chevron-right")]),_:1})]),_:1})])]),_:1})]),_:1})])]),_:1})]),_:1},8,["modelValue"])])]))])]),_:1})}}},Yl=$e(Al,[["__scopeId","data-v-73632611"]]);export{Yl as default};
