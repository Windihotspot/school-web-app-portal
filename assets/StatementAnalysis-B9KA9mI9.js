import{_ as pe,r as s,u as ye,b as xe,o as ge,e as I,f as v,g as be,w as g,M as we,h as Jt,i as p,j as t,k as b,l as w,m as f,t as o,F as B,n as L,p as Me,q as Te,E,s as Ye,v as Ae}from"./index-D6IrgxxW.js";const e=W=>(Ye("data-v-f457ec9b"),W=W(),Ae(),W),Oe={class:"p-2 bg-[#f0f8ff]"},ke=e(()=>t("h2",{class:"text-xl font-bold mt-2 ml-6"},"Statement Analysis Result",-1)),Se={key:0,class:"flex items-center justify-center h-96"},Ie={key:1,class:"p-2 md:p-8"},Ne={class:"flex justify-between"},De=e(()=>t("i",{class:"fas fa-arrow-left mr-2"},null,-1)),Re={class:"text-right"},je=e(()=>t("i",{class:"fas fa-download mr-2"},null,-1)),Ce={class:"grid grid-cols-1 md:grid-cols-3 gap-6 text-gray-700 mt-4 mb-6"},$e=e(()=>t("i",{class:"fas fa-calendar mr-2"},null,-1)),Be=e(()=>t("strong",null,"Statement Period:",-1)),Le=e(()=>t("br",null,null,-1)),Ee=e(()=>t("i",{class:"fas fa-user-circle mr-2"},null,-1)),We=e(()=>t("strong",null,"Account Name:",-1)),qe=e(()=>t("br",null,null,-1)),Pe=e(()=>t("i",{class:"fas fa-id-card mr-2"},null,-1)),Ue=e(()=>t("strong",null,"Account Number:",-1)),Ve=e(()=>t("br",null,null,-1)),He={class:"mt-6"},Ge={class:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-4 px-4"},ze={class:"bg-blue-50 text-center shadow rounded-2xl p-4 flex flex-col items-center justify-center"},Ke={class:"text-md font-semibold"},Je=e(()=>t("div",{class:"text-sm text-gray-500 mt-1"},"Total Credit",-1)),Qe={class:"bg-red-50 text-center shadow rounded-2xl p-4 flex flex-col items-center justify-center"},Xe={class:"text-md font-semibold"},Ze=e(()=>t("div",{class:"text-sm text-gray-500 mt-1"},"Total Debits",-1)),Fe={class:"bg-green-50 text-center shadow rounded-2xl p-4 flex flex-col items-center justify-center"},ts={class:"text-md font-semibold"},es=e(()=>t("div",{class:"text-sm text-gray-500 mt-1"},"Avg. Monthly Credit",-1)),ss={class:"bg-purple-50 text-center shadow rounded-2xl p-4 flex flex-col items-center justify-center"},os={class:"text-md font-semibold"},ns=e(()=>t("div",{class:"text-sm text-gray-500 mt-1"},"Avg. Monthly Debits",-1)),as={class:"bg-gray-100 text-center shadow rounded-2xl p-4 flex flex-col items-center justify-center"},ls={class:"text-md font-semibold"},ds=e(()=>t("div",{class:"text-sm text-gray-500 mt-1"},"Average Monthly Balance",-1)),cs={class:"flex flex-col md:flex-row gap-4 p-4"},is={class:"bg-white rounded-2xl shadow-md p-4 w-full md:w-1/3"},rs=e(()=>t("p",{class:"text-sm text-gray-500 mb-1"},"Most Frequent Expense",-1)),us={class:"font-semibold text-gray-800 leading-tight"},_s=e(()=>t("br",null,null,-1)),hs={class:"bg-white rounded-2xl shadow-md p-4 w-full md:w-1/3"},fs=e(()=>t("p",{class:"text-sm text-gray-500 mb-1"},"Highest Spend",-1)),ms={class:"font-semibold text-gray-800 text-lg"},vs={class:"text-sm font-semibold text-gray-600 mt-1"},ps={class:"bg-white rounded-2xl shadow-md p-4 w-full md:w-1/3"},ys=e(()=>t("p",{class:"text-sm text-gray-500 mb-1"},"Most Frequent Expense Amount",-1)),xs={class:"font-semibold text-gray-800 text-lg"},gs={class:"bg-white p-6 rounded-2xl shadow-md overflow-x-auto"},bs=e(()=>t("h2",{class:"text-lg font-semibold text-gray-800 m-4"},"Expenses",-1)),ws={class:"min-w-full table-auto border-collapse"},Ms=e(()=>t("thead",null,[t("tr",{class:"text-left text-sm font-semibold text-gray-600 border-b border-gray-200"},[t("th",{class:"py-3 px-4"},"Expenses"),t("th",{class:"py-3 px-4"},"Average Monthly Expenditure"),t("th",{class:"py-3 px-4"},"Total Expenditure")])],-1)),Ts={class:"py-3 px-4"},Ys={class:"py-3 px-4"},As={class:"py-3 px-4"},Os={class:"flex flex-col md:flex-row gap-4 text-center text-gray-500 py-10"},ks={class:"flex-1 bg-white border p-6 rounded-xl shadow"},Ss=e(()=>t("h2",{class:"text-lg font-semibold text-blue-800 mb-4"},"Inflow Summary",-1)),Is={class:"space-y-2"},Ns={class:"flex justify-between"},Ds=e(()=>t("span",null,"Total Inflow",-1)),Rs={class:"text-green-600 font-bold"},js={class:"flex justify-between"},Cs=e(()=>t("span",null,"Average Monthly Inflow",-1)),$s={class:"font-medium"},Bs={class:"flex justify-between"},Ls=e(()=>t("span",null,"Average Weekly Inflow",-1)),Es={class:"font-medium"},Ws={class:"flex-1 bg-white border p-6 rounded-xl shadow"},qs=e(()=>t("h2",{class:"text-lg font-semibold text-blue-800 mb-4"},"Outflow Summary",-1)),Ps={class:"space-y-2"},Us={class:"flex justify-between"},Vs=e(()=>t("span",null,"Total Outflow",-1)),Hs={class:"text-red-600 font-bold"},Gs={class:"flex justify-between"},zs=e(()=>t("span",null,"Average Monthly Outflow",-1)),Ks={class:"font-medium"},Js={class:"flex justify-between"},Qs=e(()=>t("span",null,"Average Weekly Outflow",-1)),Xs={class:"font-medium"},Zs={class:"flex gap-4 justify-between p-2"},Fs={class:"flex justify-between bg-[#1f4e99] text-white rounded-2xl p-6 w-full"},to={class:"flex-1 text-md font-semibold"},eo=e(()=>t("div",{class:"text-sm mt-2"},"Average Monthly Balance",-1)),so={class:"flex-1 text- text-md font-semibold"},oo=e(()=>t("div",{class:"text-sm mt-2"},"Average Weekly Balance",-1)),no=e(()=>t("div",{class:"flex justify-between bg-[#1f4e99] text-white rounded-2xl p-6 w-full"},[t("div",{class:"flex-1"},[t("div",{class:"text-md font-semibold"},"Negative Cash Flow"),t("div",{class:"text-sm mt-2"},"Inflow to Outflow Rate")]),t("div",{class:"flex-1"},[t("div",{class:"text-md font-semibold"},"Negative Cash Flow"),t("div",{class:"text-sm mt-2"},"Overall Inflow to Outflow")])],-1)),ao={class:"p-2 rounded-lg shadow-md"},lo=e(()=>t("h2",{class:"text-lg font-semibold text-gray-800 mb-2 mt-2"},"Credit & Debit Summary",-1)),co={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},io={class:"bg-white p-4 rounded-lg shadow"},ro=e(()=>t("h3",{class:"text-lg font-bold text-gray-700 mb-3"},"Monthly Credit & Debit",-1)),uo={class:"overflow-y-auto max-h-96"},_o={class:"min-w-full table-auto text-sm text-left text-gray-600"},ho=e(()=>t("thead",{class:"bg-gray-100 font-medium text-gray-700"},[t("tr",null,[t("th",{class:"px-2 py-2"},"Month"),t("th",{class:"px-2 py-2"},"Total Credit"),t("th",{class:"px-2 py-2"},"Total Debit")])],-1)),fo={class:"px-2 py-2"},mo={class:"px-2 py-2"},vo={class:"px-2 py-2"},po={class:"bg-white p-4 rounded-lg shadow"},yo=e(()=>t("h3",{class:"text-lg font-bold text-gray-700 mb-3"},"Weekly Credit & Debit",-1)),xo={class:"overflow-y-auto max-h-96"},go={class:"min-w-full table-auto text-sm text-left text-gray-600"},bo=e(()=>t("thead",{class:"bg-gray-100 font-medium text-gray-700"},[t("tr",null,[t("th",{class:"px-2 py-2"},"Week"),t("th",{class:"px-2 py-2"},"Total Credit"),t("th",{class:"px-2 py-2"},"Total Debit")])],-1)),wo={class:"px-2 py-2"},Mo={class:"px-2 py-2"},To={class:"px-2 py-2"},Yo={class:"grid grid-cols-1 md:grid-cols-2 gap-6 text-sm"},Ao={class:"bg-white p-6 rounded-2xl shadow-md"},Oo=e(()=>t("h2",{class:"text-lg font-semibold text-blue-700 mb-4"},"Loan Analysis",-1)),ko={class:"space-y-2"},So={class:"flex justify-between"},Io=e(()=>t("span",null,"Number of Loan Transactions",-1)),No={class:"flex justify-between"},Do=e(()=>t("span",null,"Total Loan Amount",-1)),Ro={class:"flex justify-between"},jo=e(()=>t("span",null,"Average Monthly Loan Amount",-1)),Co={class:"flex justify-between"},$o=e(()=>t("span",null,"Total Loan Repayment Amount",-1)),Bo={class:"flex justify-between"},Lo=e(()=>t("span",null,"Average Monthly Loan Repayment Amount",-1)),Eo={class:"flex justify-between"},Wo=e(()=>t("span",null,"Loan to Inflow Rate",-1)),qo={class:"flex justify-between"},Po=e(()=>t("span",null,"Latest Loan Transaction Date",-1)),Uo={class:"flex justify-between"},Vo=e(()=>t("span",null,"Latest Loan Repayment Transaction Date",-1)),Ho={class:"bg-white p-6 rounded-2xl shadow-md"},Go=e(()=>t("h2",{class:"text-lg font-semibold text-blue-700 mb-4"},"Patterns",-1)),zo={class:"space-y-2"},Ko={class:"flex justify-between"},Jo=e(()=>t("span",null,"Account Sweep",-1)),Qo={class:"flex justify-between"},Xo=e(()=>t("span",null,"Number of Betting Transactions",-1)),Zo={class:"flex justify-between"},Fo=e(()=>t("span",null,"Gambling Rate",-1)),tn={class:"flex justify-between"},en=e(()=>t("span",null,"Percentage of Debit Transactions",-1)),sn={class:"flex justify-between"},on=e(()=>t("span",null,"Percentage of Credit Transactions",-1)),nn={class:"flex justify-between"},an=e(()=>t("span",null,"Percentage of Transactions between 500k - 1M",-1)),ln={class:"flex justify-between"},dn=e(()=>t("span",null,"Percentage of Transactions Greater Than 1M",-1)),cn={class:"flex justify-between"},rn=e(()=>t("span",null,"Most Frequent Balance Range",-1)),un={class:"flex flex-wrap gap-4 justify-between mt-4"},_n={class:"bg-[#2059a5] text-white p-6 rounded-2xl w-full md:w-[48%] shadow"},hn={class:"grid grid-cols-3 gap-4 text-sm md:text-base"},fn=e(()=>t("div",null,null,-1)),mn=e(()=>t("div",{class:"text-center font-medium"},"Outflow",-1)),vn=e(()=>t("div",{class:"text-center font-medium"},"Inflow",-1)),pn=e(()=>t("div",{class:"text-left"},"Number of Self Transfers",-1)),yn={class:"text-center font-semibold"},xn={class:"text-center font-semibold"},gn=e(()=>t("div",{class:"text-left"},"Value of Self Transfers",-1)),bn={class:"text-center font-semibold"},wn={class:"text-center font-semibold"},Mn={class:"bg-[#2059a5] text-white p-6 rounded-2xl w-full md:w-[48%] shadow"},Tn={class:"grid grid-cols-2 gap-4 text-center"},Yn={class:"text-2xl font-bold"},An=e(()=>t("div",{class:"text-sm"},"Total Transactions",-1)),On={class:"text-2xl font-bold"},kn=e(()=>t("div",{class:"text-sm"},"Returned Cheque",-1)),Sn={class:"flex flex-col md:flex-row gap-6 justify-between mt-4"},In={class:"w-full md:w-1/2"},Nn=e(()=>t("h3",{class:"font-semibold text-sm md:text-base mb-2"}," Self Transfer Transactions ",-1)),Dn={class:"bg-white rounded-xl border shadow p-4 max-h-96 overflow-y-auto"},Rn={class:"w-full text-sm text-left"},jn=e(()=>t("thead",{class:"text-gray-600"},[t("tr",null,[t("th",{class:"py-2 px-4"},"Month"),t("th",{class:"py-2 px-4"},"Inflow"),t("th",{class:"py-2 px-4"},"Outflow")])],-1)),Cn={key:0},$n=e(()=>t("td",{colspan:"3",class:"text-center py-4 text-gray-500"}," No data available ",-1)),Bn=[$n],Ln={class:"py-2 px-4"},En={class:"py-2 px-4"},Wn={class:"py-2 px-4"},qn={class:"w-full md:w-1/2"},Pn=e(()=>t("h3",{class:"font-semibold text-sm md:text-base mb-2"}," Account Balance Analysis ",-1)),Un={class:"bg-white border rounded-xl shadow p-4 max-h-96 overflow-y-auto"},Vn={class:"w-full text-sm text-left"},Hn=e(()=>t("thead",{class:"text-gray-600"},[t("tr",null,[t("th",{class:"py-2 px-4"},"Month"),t("th",{class:"py-2 px-4"},"Highest Balance"),t("th",{class:"py-2 px-4"},"Lowest Balance")])],-1)),Gn={class:"py-2 px-4"},zn={class:"py-2 px-4"},Kn={class:"py-2 px-4"},Jn=e(()=>t("div",{class:"text-center text-gray-500 py-10"},"Transactions Content",-1)),Qn={__name:"StatementAnalysis",setup(W){const q=s("Summary");function d(_){return new Intl.NumberFormat("en-NG",{style:"currency",currency:"NGN",minimumFractionDigits:2}).format(_||0)}const tt=ye(),P=xe(),Qt=s(null),U=s(!0),et=s(null),Xt=s(""),st=s(""),J=s(""),ot=s(""),nt=s(0),at=s(0),Q=s(0),X=s(0),Z=s(0),lt=s(0),dt=s(0),Zt=s(0),ct=s(0),it=s(0),Ft=s(0),rt=s(0),ut=s([]),_t=s([]),ht=s(0),ft=s(0),mt=s(0),vt=s(""),pt=s([]),yt=s(""),xt=s(""),gt=s(""),bt=s(""),wt=s(0),F=s(""),Mt=s(0),Tt=s(""),te=s(0),ee=s(0),Yt=s(0),At=s(0),Ot=s(0),kt=s(0),St=s(0),se=s(0),oe=s(0),It=s(""),Nt=s([]),Dt=s(""),ne=s(""),ae=s(0),le=s(""),Rt=s(0),jt=s(0),Ct=s(0),$t=s(0),Bt=s(0),Lt=s(0),Et=s(0),V=s([]),Wt=s([]),de=async _=>{var A,k,M,Y,l,y,G,z,O,qt,Pt,Ut,Vt;const h=JSON.parse(localStorage.getItem("data")||"{}"),N=(h==null?void 0:h.token)||P.token,D=`https://dev02201.getjupita.com/api/${((A=h==null?void 0:h.user)==null?void 0:A.tenant_id)||P.tenant_id}/get-analysis-result?analysis_id=${_}`;U.value=!0;try{let Gt=function(a){return p(a,"M-YYYY").format("MMM YYYY")};const S=await Jt.get(D,{headers:{Authorization:`Bearer ${N}`,"Content-Type":"application/json"}});console.log("statement analysis result page data:",S),Qt.value=S.data;const c=(Y=(M=(k=S.data)==null?void 0:k.data)==null?void 0:M.analysis_result)==null?void 0:Y.analysis_result;Xt.value=(c==null?void 0:c.name)||"N/A",st.value=(c==null?void 0:c.clientFullName)||"N/A",ot.value=(c==null?void 0:c.accountId)||"N/A";const r=(c==null?void 0:c.behavioralAnalysis)||{};F.value=r.accountSweep||"No",Mt.value=r.gamblingRate||0,Tt.value=r.gamblingStatus||"N/A",te.value=r.loanInflowRate||0,ee.value=r.accountActivity||0,Yt.value=r.totalLoanAmount||0,At.value=r.loanToInflowRate||0,Ot.value=r.numberLoanTransactions||0,kt.value=r.averageMonthlyLoanAmount||0,St.value=r.totalLoanRepaymentAmount||0,se.value=r.loanRepaymentToInflowRate||0,oe.value=r.numberRepaymentTransactions||0,Nt.value=r.latestRepaymentTransaction||[];const K=Nt.value[0]||null;Dt.value=K!=null&&K.date?p(K.date).format("MMM D, YYYY"):"N/A";const Ht=(l=r.latestLoanTransaction)==null?void 0:l[0];It.value=Ht?p(Ht.date).format("MMMM D, YYYY"):"N/A",ne.value=r.overallInflowToOutflowRate||"N/A",ae.value=r.percentOfInflowIrregularity||0,le.value=r.monthToMonthInflowToOutflowRate||"N/A",Rt.value=r.averageMonthlyLoanRepaymentAmount||0;const n=c==null?void 0:c.cashFlowAnalysis;console.log("cash flow data:",n),ht.value=c==null?void 0:c.spendAnalysis.mostFrequentExpense,ft.value=c==null?void 0:c.spendAnalysis.mostFrequentExpenseAmount;const u=((O=(z=(G=(y=S.data)==null?void 0:y.data)==null?void 0:G.analysis_result)==null?void 0:z.analysis_result)==null?void 0:O.spendAnalysis)||{},m=((Vt=(Ut=(Pt=(qt=S.data)==null?void 0:qt.data)==null?void 0:Pt.analysis_result)==null?void 0:Ut.analysis_result)==null?void 0:Vt.transactionPatternAnalysis)||{};console.log("pattern analysis:",m),yt.value=(m.percentDebitTransactions*100).toFixed(2)+"%",xt.value=(m.percentDebitTransactions*100).toFixed(2)+"%",gt.value=(m.percentOfTransactionsBetween500ThousandToOneMillionNaira*100).toFixed(2)+"%",bt.value=(m.percentOfTransactionsGreaterThanOneMillionNaira*100).toFixed(2)+"%",wt.value=m.mostFrequentBalanceRange,jt.value=m.noOfSelfTransferInflows,Ct.value=m.noOfSelfTransferOutflows,$t.value=m.selfTransferInflowAmount,Bt.value=m.selfTransferOutflowAmount,Lt.value=m.totalNumberOfTransactions,Et.value=m.returnCheque;const ie=m.selfTransferInflowTransactionsByMonth||[],re=m.selfTransferOutflowTransactionsByMonth||[],R=new Map;ie.forEach(a=>{const i=Gt(a.date);R.set(i,{month:i,inflow:a.amount,outflow:0})}),re.forEach(a=>{const i=Gt(a.date);R.has(i)?R.get(i).outflow=a.amount:R.set(i,{month:i,inflow:0,outflow:a.amount})}),V.value=Array.from(R.values()).sort((a,i)=>p(a.month,"MMM YYYY")-p(i.month,"MMM YYYY")),mt.value=u.highestSpend,vt.value=p(u.monthWithHighestSpend,"M/YYYY").format("MMMM YYYY"),pt.value=[{label:"Others",monthly:u.averageMonthlySpendOnOthers??0,total:12*(u.averageMonthlySpendOnOthers??0)},{label:"Rent",monthly:u.averageMonthlySpendOnRent??0,total:12*(u.averageMonthlySpendOnRent??0)},{label:"Hospitality and Food",monthly:u.averageMonthlySpendOnHospitalityAndFood??0,total:12*(u.averageMonthlySpendOnHospitalityAndFood??0)},{label:"Transportation",monthly:u.averageMonthlySpendOnTransportation??0,total:12*(u.averageMonthlySpendOnTransportation??0)},{label:"Utilities",monthly:u.averageMonthlySpendOnUtilities??0,total:12*(u.averageMonthlySpendOnUtilities??0)},{label:"Charges and Stamp Duty",monthly:u.averageMonthlySpendOnChargesAndStampDuty??0,total:12*(u.averageMonthlySpendOnChargesAndStampDuty??0)},{label:"Transfer",monthly:u.averageMonthlySpendOnTransfer??0,total:12*(u.averageMonthlySpendOnTransfer??0)},{label:"ATM Withdrawals and POS",monthly:u.averageMonthlySpendOnAtmAndPOS??0,total:12*(u.averageMonthlySpendOnAtmAndPOS??0)}],nt.value=(n==null?void 0:n.totalDebitTurnOver)||0,at.value=(n==null?void 0:n.totalCreditTurnover)||0,Q.value=(n==null?void 0:n.averageMonthlyDebits)||0,X.value=(n==null?void 0:n.averageMonthlyCredits)||0,Z.value=(n==null?void 0:n.averageMonthlyBalance)||0,lt.value=(n==null?void 0:n.averageWeeklyBalance)||0,dt.value=(n==null?void 0:n.totalCreditTurnover)||0,Zt.value=(n==null?void 0:n.averageMonthlyCredits)||0,ct.value=(n==null?void 0:n.averageWeeklyCredits)||0,it.value=(n==null?void 0:n.totalDebitTurnOver)||0,Ft.value=(n==null?void 0:n.averageMonthlyDebits)||0,rt.value=(n==null?void 0:n.averageWeeklyDebits)||0;const ue=(n==null?void 0:n.monthlyHighestBalance)||[],_e=(n==null?void 0:n.monthlyLowestBalance)||[],j=new Map;ue.forEach(a=>{const i=`${a.month_name} ${a.year}`,x=p(i,"MMMM YYYY").format("MMM YYYY"),T=`${a.month_name}-${a.year}`;j.set(T,{month:x,highest:a.highest_balance,lowest:0})}),_e.forEach(a=>{const i=`${a.month_name} ${a.year}`,x=p(i,"MMMM YYYY").format("MMM YYYY"),T=`${a.month_name}-${a.year}`;j.has(T)?j.get(T).lowest=a.lowest_balance:j.set(T,{month:x,highest:0,lowest:a.lowest_balance})}),Wt.value=Array.from(j.values());const he=(n==null?void 0:n.monthlyInflow)||[],fe=(n==null?void 0:n.monthlyOutflow)||[],C=new Map;he.forEach(a=>{const i=`${a.month_name} ${a.year}`,x=p(i,"MMMM YYYY").format("MMM YYYY"),T=`${a.month_name}-${a.year}`;C.set(T,{month:x,credit:a.amount,debit:0})}),fe.forEach(a=>{const i=`${a.month_name} ${a.year}`,x=p(i,"MMMM YYYY").format("MMM YYYY"),T=`${a.month_name}-${a.year}`;C.has(T)?C.get(T).debit=a.amount:C.set(T,{month:x,credit:0,debit:a.amount})}),ut.value=Array.from(C.values());const me=(n==null?void 0:n.weeklyInflow)||[],ve=(n==null?void 0:n.weeklyOutflow)||[],$=new Map;me.forEach(a=>{const i=p().month(a.month_name).format("MMM"),x=`${a.year}-${i}-W${a.week}`;$.set(x,{week:`${i} ${a.year} | ${a.week}`,credit:a.amount,debit:0})}),ve.forEach(a=>{const i=p().month(a.month_name).format("MMM"),x=`${a.year}-${i}-W${a.week}`;$.has(x)?$.get(x).debit=a.amount:$.set(x,{week:`${i} ${a.year} ${a.week}`,credit:0,debit:a.amount})}),_t.value=Array.from($.values());const zt=new Date(c==null?void 0:c.startDate),Kt=new Date(c==null?void 0:c.endDate);!isNaN(zt)&&!isNaN(Kt)?J.value=`${p(zt).format("MMMM D, YYYY")} - ${p(Kt).format("MMMM D, YYYY")}`:J.value="Unknown period"}catch(S){console.error("Error fetching analysis result:",S),et.value="Unable to fetch analysis result."}finally{U.value=!1}};ge(()=>{const _=tt.params.id;_?de(_):(et.value="Invalid analysis ID.",U.value=!1)});const ce=async()=>{var k;const _=JSON.parse(localStorage.getItem("data")||"{}"),h=(_==null?void 0:_.token)||P.token,N=((k=_==null?void 0:_.user)==null?void 0:k.tenant_id)||P.tenant_id,H=tt.params.id,D=`https://dev02201.getjupita.com/api/${N}/download-insight-report?analysis_id=${H}`;let A=null;try{A=E({message:"Getting your analysis report...",type:"success",duration:0,showClose:!0});const M=await Jt.get(D,{headers:{Authorization:`Bearer ${h}`}});console.log("download analysis response:",M.data);const Y=M.data.data.download;if(!Y||!Y.document_url||!Y.document_name)throw new Error("No download information or document URL found in the response.");E.closeAll();const l=Y.document_name||"analysis_report.pdf",G=l.split(".").pop()==="pdf"?l:`${l}.pdf`,z=Y.document_url,O=document.createElement("a");O.href=z,O.download=G,O.target="_blank",document.body.appendChild(O),O.click(),document.body.removeChild(O),E({message:"Analysis report downloaded successfully.",type:"success",duration:6e4})}catch(M){console.error("Download failed:",M),E.closeAll(),E.error("Failed to download analysis. Please try again.")}};return(_,h)=>{const N=I("v-progress-circular"),H=I("RouterLink"),D=I("v-btn"),A=I("v-tab"),k=I("v-tabs"),M=I("v-tabs-window-item"),Y=I("v-tabs-window");return v(),be(we,null,{default:g(()=>[t("div",Oe,[ke,U.value?(v(),b("div",Se,[w(N,{size:100,width:10,color:"primary",indeterminate:""})])):(v(),b("div",Ie,[t("div",Ne,[w(H,{to:"/dashboard"},{default:g(()=>[t("button",{onClick:h[0]||(h[0]=(...l)=>_.goBack&&_.goBack(...l)),class:"mb-2 flex items-center text-blue-600 font-semibold"},[De,f(" Back ")])]),_:1}),t("div",Re,[w(D,{onClick:ce,"no-uppercase":"",size:"small",class:"normal-case p-4 bg-blue-600 hover:bg-blue-700 text-white text-none mr-2 custom-btn"},{default:g(()=>[je,f(" Download Analysis ")]),_:1})])]),t("div",Ce,[t("p",null,[$e,Be,f(),Le,f(" "+o(J.value),1)]),t("p",null,[Ee,We,f(),qe,f(" "+o(st.value),1)]),t("p",null,[Pe,Ue,f(),Ve,f(" "+o(ot.value),1)])]),t("div",He,[w(k,{"align-tabs":"center",class:"mb-6",modelValue:q.value,"onUpdate:modelValue":h[1]||(h[1]=l=>q.value=l),color:"primary"},{default:g(()=>[w(A,{value:"summary"},{default:g(()=>[f("Summary")]),_:1}),w(A,{value:"cash flow"},{default:g(()=>[f("Cash Flow")]),_:1}),w(A,{value:"behavioral"},{default:g(()=>[f("Behavioral")]),_:1}),w(A,{value:"transactions"},{default:g(()=>[f("Transactions")]),_:1})]),_:1},8,["modelValue"]),w(Y,{modelValue:q.value,"onUpdate:modelValue":h[2]||(h[2]=l=>q.value=l)},{default:g(()=>[w(M,{value:"summary"},{default:g(()=>[t("div",Ge,[t("div",ze,[t("div",Ke,o(d(at.value)),1),Je]),t("div",Qe,[t("div",Xe,o(d(nt.value)),1),Ze]),t("div",Fe,[t("div",ts,o(d(X.value)),1),es]),t("div",ss,[t("div",os,o(d(Q.value)),1),ns]),t("div",as,[t("div",ls,o(d(Z.value)),1),ds])]),t("div",cs,[t("div",is,[rs,t("p",us,[f(o(ht.value),1),_s])]),t("div",hs,[fs,t("p",ms,o(d(mt.value)),1),t("p",vs," Transaction Date: "+o(vt.value),1)]),t("div",ps,[ys,t("p",xs,o(d(ft.value)),1)])]),t("div",gs,[bs,t("table",ws,[Ms,t("tbody",null,[(v(!0),b(B,null,L(pt.value,(l,y)=>(v(),b("tr",{key:y,class:"text-sm text-gray-700 border-b border-gray-100 hover:bg-gray-50"},[t("td",Ts,o(l.label),1),t("td",Ys,o(d(l.monthly)),1),t("td",As,o(d(l.total)),1)]))),128))])])])]),_:1}),w(M,{value:"cash flow"},{default:g(()=>[t("div",Os,[t("div",ks,[Ss,t("div",Is,[t("div",Ns,[Ds,t("span",Rs,o(d(dt.value)),1)]),t("div",js,[Cs,t("span",$s,o(d(X.value)),1)]),t("div",Bs,[Ls,t("span",Es,o(d(ct.value)),1)])])]),t("div",Ws,[qs,t("div",Ps,[t("div",Us,[Vs,t("span",Hs,o(d(it.value)),1)]),t("div",Gs,[zs,t("span",Ks,o(d(Q.value)),1)]),t("div",Js,[Qs,t("span",Xs,o(d(rt.value)),1)])])])]),t("div",Zs,[t("div",Fs,[t("div",to,[f(o(d(Z.value))+" ",1),eo]),t("div",so,[f(o(d(lt.value))+" ",1),oo])]),no]),t("div",ao,[lo,t("div",co,[t("div",io,[ro,t("div",uo,[t("table",_o,[ho,t("tbody",null,[(v(!0),b(B,null,L(ut.value,(l,y)=>(v(),b("tr",{key:y,class:"border-b"},[t("td",fo,o(l.month),1),t("td",mo,o(d(l.credit)),1),t("td",vo,o(d(l.debit)),1)]))),128))])])])]),t("div",po,[yo,t("div",xo,[t("table",go,[bo,t("tbody",null,[(v(!0),b(B,null,L(_t.value,(l,y)=>(v(),b("tr",{key:y,class:"border-b"},[t("td",wo,o(l.week),1),t("td",Mo,o(d(l.credit)),1),t("td",To,o(d(l.debit)),1)]))),128))])])])])])])]),_:1}),w(M,{value:"behavioral"},{default:g(()=>[t("div",Yo,[t("div",Ao,[Oo,t("div",ko,[t("div",So,[Io,t("span",null,o(Ot.value),1)]),t("div",No,[Do,t("span",null,o(d(Yt.value)),1)]),t("div",Ro,[jo,t("span",null,o(d(kt.value)),1)]),t("div",Co,[$o,t("span",null,o(d(St.value)),1)]),t("div",Bo,[Lo,t("span",null,o(d(Rt.value)),1)]),t("div",Eo,[Wo,t("span",null,o(At.value)+"%",1)]),t("div",qo,[Po,t("span",null,o(It.value),1)]),t("div",Uo,[Vo,t("span",null,o(Dt.value),1)])])]),t("div",Ho,[Go,t("div",zo,[t("div",Ko,[Jo,t("span",{class:Me(["font-semibold",F.value==="YES"?"text-green-600":"text-gray-600"])},o(F.value),3)]),t("div",Qo,[Xo,t("span",null,o(Tt.value),1)]),t("div",Zo,[Fo,t("span",null,o(Mt.value),1)]),t("div",tn,[en,t("span",null,o(yt.value),1)]),t("div",sn,[on,t("span",null,o(xt.value),1)]),t("div",nn,[an,t("span",null,o(gt.value),1)]),t("div",ln,[dn,t("span",null,o(bt.value),1)]),t("div",cn,[rn,t("span",null,o(wt.value),1)])])])]),t("div",un,[t("div",_n,[t("div",hn,[fn,mn,vn,pn,t("div",yn,o(Ct.value),1),t("div",xn,o(jt.value),1),gn,t("div",bn,o(d(Bt.value)),1),t("div",wn,o(d($t.value)),1)])]),t("div",Mn,[t("div",Tn,[t("div",null,[t("div",Yn,o(Lt.value),1),An]),t("div",null,[t("div",On,o(Et.value),1),kn])])])]),t("div",Sn,[t("div",In,[Nn,t("div",Dn,[t("table",Rn,[jn,t("tbody",null,[!V.value||V.value.length===0?(v(),b("tr",Cn,Bn)):Te("",!0),(v(!0),b(B,null,L(V.value,(l,y)=>(v(),b("tr",{key:y,class:"border-b last:border-none"},[t("td",Ln,o(l.month),1),t("td",En,o(d(l.inflow)),1),t("td",Wn,o(d(l.outflow)),1)]))),128))])])])]),t("div",qn,[Pn,t("div",Un,[t("table",Vn,[Hn,t("tbody",null,[(v(!0),b(B,null,L(Wt.value,(l,y)=>(v(),b("tr",{key:y},[t("td",Gn,o(l.month),1),t("td",zn,o(d(l.highest)),1),t("td",Kn,o(d(l.lowest)),1)]))),128))])])])])])]),_:1}),w(M,{value:"transactions"},{default:g(()=>[Jn]),_:1})]),_:1},8,["modelValue"])])]))])]),_:1})}}},Zn=pe(Qn,[["__scopeId","data-v-f457ec9b"]]);export{Zn as default};
