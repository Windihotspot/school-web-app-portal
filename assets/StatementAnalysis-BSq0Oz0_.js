import{_ as O,r as n,u as P,b as J,o as q,e as v,f as N,g as H,w as l,M as K,h as Q,i as U,j as t,k as $,l as c,m as r,t as u,p as W,n as X}from"./index-BaeZs41b.js";const e=h=>(W("data-v-38e34aa9"),h=h(),X(),h),Z={class:"p-2"},F=e(()=>t("h2",{class:"text-xl font-bold mt-2 ml-6"},"Statement Analysis Result",-1)),tt={key:0,class:"flex items-center justify-center h-96"},et={key:1,class:"p-2 md:p-8"},st={class:"flex justify-between"},at=e(()=>t("i",{class:"fas fa-arrow-left mr-2"},null,-1)),ot={class:"text-right"},nt=e(()=>t("i",{class:"fas fa-download mr-2"},null,-1)),lt={class:"grid grid-cols-1 md:grid-cols-3 gap-6 text-gray-700 mt-4"},ct=e(()=>t("i",{class:"fas fa-calendar mr-2"},null,-1)),rt=e(()=>t("strong",null,"Statement Period:",-1)),it=e(()=>t("br",null,null,-1)),dt=e(()=>t("i",{class:"fas fa-user-circle mr-2"},null,-1)),ut=e(()=>t("strong",null,"Account Name:",-1)),_t=e(()=>t("br",null,null,-1)),mt=e(()=>t("i",{class:"fas fa-id-card mr-2"},null,-1)),vt=e(()=>t("strong",null,"Account Number:",-1)),ft=e(()=>t("br",null,null,-1)),ht={class:"mt-6"},pt={class:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-4 px-4"},gt={class:"bg-blue-50 text-center shadow rounded-2xl p-4 flex flex-col items-center justify-center"},xt={class:"text-md font-semibold"},bt=e(()=>t("div",{class:"text-sm text-gray-500 mt-1"},"Total Credit",-1)),yt={class:"bg-red-50 text-center shadow rounded-2xl p-4 flex flex-col items-center justify-center"},wt={class:"text-md font-semibold"},Mt=e(()=>t("div",{class:"text-sm text-gray-500 mt-1"},"Total Debits",-1)),Nt={class:"bg-green-50 text-center shadow rounded-2xl p-4 flex flex-col items-center justify-center"},kt={class:"text-md font-semibold"},Ct=e(()=>t("div",{class:"text-sm text-gray-500 mt-1"},"Avg. Monthly Credit",-1)),Dt={class:"bg-purple-50 text-center shadow rounded-2xl p-4 flex flex-col items-center justify-center"},St={class:"text-md font-semibold"},At=e(()=>t("div",{class:"text-sm text-gray-500 mt-1"},"Avg. Monthly Debits",-1)),Bt={class:"bg-gray-100 text-center shadow rounded-2xl p-4 flex flex-col items-center justify-center"},It={class:"text-md font-semibold"},jt=e(()=>t("div",{class:"text-sm text-gray-500 mt-1"},"Average Monthly Balance",-1)),Tt=e(()=>t("div",{class:"text-center text-gray-500 py-10"},"Cash Flow Content",-1)),Vt=e(()=>t("div",{class:"text-center text-gray-500 py-10"},"Behavioral Content",-1)),Yt=e(()=>t("div",{class:"text-center text-gray-500 py-10"},"Transactions Content",-1)),Rt={__name:"StatementAnalysis",setup(h){const p=n("Summary");function f(d){return new Intl.NumberFormat("en-NG",{style:"currency",currency:"NGN",minimumFractionDigits:2}).format(d||0)}const z=P(),k=J(),L=n(null),g=n(!0),C=n(null),E=n(""),D=n(""),y=n(""),S=n(""),A=n(0),B=n(0),I=n(0),j=n(0),T=n(0),G=async d=>{var _,x,m,b;const o=JSON.parse(localStorage.getItem("data")||"{}"),w=(o==null?void 0:o.token)||k.token,M=`https://dev02201.getjupita.com/api/${((_=o==null?void 0:o.user)==null?void 0:_.tenant_id)||k.tenant_id}/get-analysis-result?analysis_id=${d}`;g.value=!0;try{const i=await Q.get(M,{headers:{Authorization:`Bearer ${w}`,"Content-Type":"application/json"}});console.log("statement analysis result page data:",i),L.value=i.data;const s=(b=(m=(x=i.data)==null?void 0:x.data)==null?void 0:m.analysis_result)==null?void 0:b.analysis_result;E.value=(s==null?void 0:s.name)||"N/A",D.value=(s==null?void 0:s.clientFullName)||"N/A",S.value=(s==null?void 0:s.accountId)||"N/A";const a=s==null?void 0:s.cashFlowAnalysis;A.value=(a==null?void 0:a.totalDebitTurnOver)||0,B.value=(a==null?void 0:a.totalCreditTurnover)||0,I.value=(a==null?void 0:a.averageMonthlyDebits)||0,j.value=(a==null?void 0:a.averageMonthlyCredits)||0,T.value=(a==null?void 0:a.averageMonthlyBalance)||0;const Y=new Date(s==null?void 0:s.createdDate),R=new Date(s==null?void 0:s.endDate);!isNaN(Y)&&!isNaN(R)?y.value=`${U(Y).format("MMMM D, YYYY")} - ${U(R).format("MMMM D, YYYY")}`:y.value="Unknown period"}catch(i){console.error("Error fetching analysis result:",i),C.value="Unable to fetch analysis result."}finally{g.value=!1}};return q(()=>{const d=z.params.id;d?G(d):(C.value="Invalid analysis ID.",g.value=!1)}),(d,o)=>{const w=v("v-progress-circular"),V=v("RouterLink"),M=v("v-btn"),_=v("v-tab"),x=v("v-tabs"),m=v("v-tabs-window-item"),b=v("v-tabs-window");return N(),H(K,null,{default:l(()=>[t("div",Z,[F,g.value?(N(),$("div",tt,[c(w,{size:100,width:10,color:"primary",indeterminate:""})])):(N(),$("div",et,[t("div",st,[c(V,{to:"/dashboard"},{default:l(()=>[t("button",{onClick:o[0]||(o[0]=(...i)=>d.goBack&&d.goBack(...i)),class:"mb-2 flex items-center text-blue-600 font-semibold"},[at,r(" Back ")])]),_:1}),t("div",ot,[c(M,{"no-uppercase":"",size:"small",class:"normal-case p-4 bg-blue-600 hover:bg-blue-700 text-white text-none mr-2 custom-btn"},{default:l(()=>[nt,r(" Download Analysis ")]),_:1})])]),t("div",lt,[t("p",null,[ct,rt,r(),it,r(" "+u(y.value),1)]),t("p",null,[dt,ut,r(),_t,r(" "+u(D.value),1)]),t("p",null,[mt,vt,r(),ft,r(" "+u(S.value),1)])]),t("div",ht,[c(x,{"align-tabs":"center",class:"mb-4",modelValue:p.value,"onUpdate:modelValue":o[1]||(o[1]=i=>p.value=i),color:"primary"},{default:l(()=>[c(_,{value:"summary"},{default:l(()=>[r("Summary")]),_:1}),c(_,{value:"cash flow"},{default:l(()=>[r("Cash Flow")]),_:1}),c(_,{value:"behavioral"},{default:l(()=>[r("Behavioral")]),_:1}),c(_,{value:"transactions"},{default:l(()=>[r("Transactions")]),_:1})]),_:1},8,["modelValue"]),c(b,{modelValue:p.value,"onUpdate:modelValue":o[2]||(o[2]=i=>p.value=i)},{default:l(()=>[c(m,{value:"summary"},{default:l(()=>[t("div",pt,[t("div",gt,[t("div",xt,u(f(B.value)),1),bt]),t("div",yt,[t("div",wt,u(f(A.value)),1),Mt]),t("div",Nt,[t("div",kt,u(f(j.value)),1),Ct]),t("div",Dt,[t("div",St,u(f(I.value)),1),At]),t("div",Bt,[t("div",It,u(f(T.value)),1),jt])])]),_:1}),c(m,{value:"cash flow"},{default:l(()=>[Tt]),_:1}),c(m,{value:"behavioral"},{default:l(()=>[Vt]),_:1}),c(m,{value:"transactions"},{default:l(()=>[Yt]),_:1})]),_:1},8,["modelValue"])])]))])]),_:1})}}},$t=O(Rt,[["__scopeId","data-v-38e34aa9"]]);export{$t as default};
